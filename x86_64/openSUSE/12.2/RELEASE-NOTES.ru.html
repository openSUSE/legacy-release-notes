<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>openSUSE 12.2 Release Notes</title><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="ru" class="article"><div class="titlepage"><div><div><h2 class="title"><a name="id112112"></a><span class="phrase">openSUSE 12.2</span> Release
  Notes</h2></div></div><hr></div><p>Версия: </p><p>12.2.9 (2012-10-22)</p><p>Авторские права © 2012 Novell, Inc.</p><p>Разрешается копировать, распространять и/или видоизменять этот документ на условиях Лицензии GNU на Свободную Документацию версии 1.2 или любой более поздней версии, изданной Free Software Foundation; без неизменяемых разделов, без текстов, помещаемых на первой странице обложки и без текстов, помещаемых на последней странице обложки. Копия лицензии включена в виде файла <code class="filename">fdl.txt</code>.</p><p>Если вы обновляетесь с более старой версии до этого выпуска openSUSE, см. предыдущие примечания здесь: <a class="ulink" href="http://en.opensuse.org/openSUSE:Release_Notes" target="_top">http://en.opensuse.org/openSUSE:Release_Notes</a></p><p>Примечания к выпуску охватывают следующие области:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="#misc" title="1. Разное">Раздел 1, «Разное»</a>: Эти записи автоматически выбраны из openFATE, системы управления запросами возможностей (<a class="ulink" href="http://features.opensuse.org" target="_top">http://features.opensuse.org</a>).</p><p>N/A</p></li><li class="listitem"><p><a class="xref" href="#installation" title="2. Установка">Раздел 2, «Установка»</a>: Прочтите это, если хотите установить систему «с нуля».</p></li><li class="listitem"><p><a class="xref" href="#general" title="3. Общее">Раздел 3, «Общее»</a>: Информация, которую должен прочитать каждый.</p></li><li class="listitem"><p><a class="xref" href="#upgrade" title="4. Обновление системы">Раздел 4, «Обновление системы»</a>: Проблемы, связанные с обновлением с предыдущей версии openSUSE.</p></li><li class="listitem"><p><a class="xref" href="#technical" title="5. Технические данные">Раздел 5, «Технические данные»</a>: Этот раздел содержит технические изменения и улучшения для опытного пользователя.</p></li></ul></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="misc"></a>1. Разное</h2></div></div></div><p>N/A</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installation"></a>2. Установка</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id339162"></a>2.1. Подробные сведения об установке</h3></div></div></div><p>For detailed installation information, see the <span class="quote">«<span class="quote">openSUSE
  Documentation</span>»</span> referenced below.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="general"></a>3. Общее</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.115.documentation"></a>3.1. Документация openSUSE</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>В Руководстве для начинающих можно найти пошаговые инструкции по установке, а также ознакомиться с рабочими столами KDE и Gnome и пакетом LibreOffice. Помимо этого, описаны базовые темы администрирования (развёртывание и управление программным обеспечением) и производится первое знакомство с оболочкой bash.</p></li><li class="listitem"><p>Справочное руководство подробно освещает вопросы администрирования и настройки системы и различных сетевых служб.</p></li><li class="listitem"><p>Руководство по безопасности ознакомит вас с основными принципами безопасности системы, как локальной, так и сетевой.</p></li><li class="listitem"><p>Руководство по анализу и настройке системы поможет в вопросах обнаружения проблем, их решения и оптимизации.</p></li><li class="listitem"><p>Виртуализация в KVM позволяет ознакомиться с настройкой и управлением виртуализацией с помощью KVM, libvirt и QEMU.</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id382215"></a>3.2. Pre-installation Memory Test Incorrectly Identifies Good
   Memory as Bad</h3></div></div></div><p>
The pre-installation memory test (<span class="command"><strong>memtest</strong></span>) on the
openSUSE 12.2 media got miscompiled. It reports errors in test 7 on good RAM
modules. Use the openSUSE 12.1 media if you need to run
<span class="command"><strong>memtest</strong></span>.
   </p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="upgrade"></a>4. Обновление системы</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.zypper-openssh"></a>4.1. Обновление удалённых машин с помощью «zypper dup»</h3></div></div></div><p>При обновлении с версии openSUSE 12.1 (или более старой) соединения openSSH будут закрыты при обновлении пакета openssh. Если вы обновляетесь с помощью «zypper dup» по SSH, запускайте «zypper dup» в возобновляемом сеансе терминала (например, «screen» или «tmux»), чтобы вы могли легко присоединиться повторно, или хотя бы в устойчивом к потере соединения (например, через «nohup»).</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.sysv"></a>4.2. Отказ от sysvinit</h3></div></div></div><p>Некоторые компоненты рабочего стола зависят от служб, предоставляемых только systemd. Таким образом, пока openSUSE 12.2 имеет базовую поддержку загрузки системы с помощью sysvinit как запасного варианта, тем не менее sysvinit считается устаревшим и в каком-то смысле сбойным и поломанным. При наличии проблем с системой, загруженной с помощью sysvinit, перед отправкой сообщений об ошибках перейдите на systemd.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.cryptoloop"></a>4.3. mount и losetup перестали поддерживать cryptoloop</h3></div></div></div><p><span class="command"><strong>cryptoloop</strong></span> обладает известными слабостями и считается устаревшей и уступающей <span class="command"><strong>dm-crypt</strong></span> уже несколько лет. <span class="command"><strong>mount</strong></span> (например, через <code class="filename">/etc/fstab</code>) и <span class="command"><strong>losetup</strong></span> наконец-то перестали поддерживать <span class="command"><strong>cryptoloop</strong></span>. Это означает, что старые записи в fstab, использующие <span class="command"><strong>cryptoloop</strong></span> для доступа к зашифрованным контейнерам, более не работают. Однако, доступ к контейнерам можно осуществлять с помощью <span class="command"><strong>dm-crypt</strong></span> (<code class="filename">/etc/crypttab</code>). Загляните на <a class="ulink" href="http://en.opensuse.org/Encrypted_Filesystems" target="_top">http://en.opensuse.org/Encrypted_Filesystems</a> за примерами использования нового метода.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="crypto-part-systemd"></a>4.4. Монтирование зашифрованных разделов с помощью systemd</h3></div></div></div><p>Если зашифрованные разделы не монтируются автоматически при использовании systemd, то причиной этому может служить флаг <code class="literal">noauto</code> для этих разделов в файле <code class="filename">/etc/fstab</code>. Замена этого флага на <code class="literal">nofail</code> исправит проблему. Например, измените следующую строку:</p><pre class="screen">/dev/mapper/cr_sda3  /home   ext4    acl,user_xattr,noauto 0 2</pre><p>на</p><pre class="screen">/dev/mapper/cr_sda3  /home   ext4    acl,user_xattr,nofail 0 2</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="technical"></a>5. Технические данные</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.114.kms"></a>5.1. Инициализация видео с KMS (Kernel Mode Setting)</h3></div></div></div><p>
With openSUSE 11.3 we switched to KMS (Kernel Mode Setting) for Intel, ATI
and NVIDIA graphics, which now is our default. If you encounter problems with
the KMS driver support (intel, radeon, nouveau), disable KMS by adding
<code class="literal">nomodeset</code> to the kernel boot command line.

To set this permanently using Grub 2, the default boot loader, add it to
the <code class="literal">GRUB_CMDLINE_LINUX_DEFAULT</code> kernel default load
options line in your <code class="filename">/etc/default/grub</code> text file as
root and running the terminal command
   </p><pre class="screen">sudo /usr/sbin/grub2-mkconfig --output=/boot/grub2/grub.cfg</pre><p>
for the changes to take effect.  Else, for Grub Legacy, add it to the kernel
command line in <code class="filename">/boot/grub/menu.lst</code>, also done as root.

This option makes sure the appropriate kernel module (intel, radeon,
nouveau) is loaded with <code class="literal">modeset=0</code> in
<code class="filename">initrd</code>, i.e. KMS is disabled.
   </p><p>В редких случаях, когда загрузка модуля DRM из <code class="filename">initrd</code> является общей проблемой и не относится к KMS, можно полностью отключить загрузку модуля DRM в <code class="filename">initrd</code>. Для этого установите параметр sysconfig <code class="literal">NO_KMS_IN_INITRD</code> в <code class="literal">yes</code> через YaST, это создаст <code class="filename">initrd</code> заново. Перезагрузитесь.</p><p>На картах Intel без KMS Xserver использует драйвер <code class="literal">fbdev</code> (драйвер <code class="literal">intel</code> поддерживает только KMS); в качестве альтернативы для устаревших видеокарт от Intel существует драйвер «intellegacy» (пакет <code class="systemitem">xorg-x11-driver-video-intel-legacy</code>), всё ещё поддерживающий UMS (User Mode Setting). Для его использования отредактируйте файл <code class="filename">/etc/X11/xorg.conf.d/50-device.conf</code> и измените драйвер на <code class="literal">intellegacy</code>.</p><p>На современных картах ATI отступным вариантом является <code class="literal">radeonhd</code>. На картах NVIDIA без KMS используется драйвер <code class="literal">nv</code> (драйвер <code class="literal">nouveau</code> поддерживает только KMS). Обратите внимание, более новые видеокарты от ATI и NVIDIA при указании параметра загрузки ядра <code class="literal">nomodeset</code> будут использовать драйвер <code class="literal">fbdev</code>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-sysvinit"></a>5.2. Загрузка через устаревший sysvinit</h3></div></div></div><p>По умолчанию openSUSE теперь загружается с помощью <span class="command"><strong>systemd</strong></span>. В случае проблем вы можете переключиться на старый способ с <span class="command"><strong>sysvinit</strong></span>, нажав F5 при загрузке.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-ctl"></a>5.3. systemd: Задание параметров запуска служб</h3></div></div></div><p><span class="command"><strong>systemctl</strong></span> поддерживает только «стандартные» параметры (см. <a class="ulink" href="http://www.freedesktop.org/wiki/Software/systemd/Incompatibilities" target="_top">http://www.freedesktop.org/wiki/Software/systemd/Incompatibilities</a>).</p><p>Это ограничение можно обойти, вызывая скрипт запуска напрямую, например:</p><pre class="screen">cd /etc/init.d
./apache2 &lt;ваши_параметры&gt;
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-shutdown"></a>5.4. systemd: выключение системы</h3></div></div></div><p>Для выключения системы при использовании <span class="command"><strong>systemd</strong></span> используйте команды <span class="command"><strong>halt -p</strong></span> или <span class="command"><strong>shutdown -h now</strong></span> в командной строке или кнопку выключения, предоставляемую вашей средой рабочего стола.</p><p>Внимание: Просто <span class="command"><strong>halt</strong></span> не сможет корректно выключить систему.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-tmpfs"></a>5.5. systemd: использование tmpfs: /run, /var/run, /media и т.п.</h3></div></div></div><p>systemd монтирует некоторые каталоги, содержащие исключительно вспомогательные данные, как файловые системы tmpfs: этими каталогами являются <code class="filename">/run</code>, <code class="filename">/var/run</code>, <code class="filename">/var/lock</code> и <code class="filename">/media</code>. Подробные объяснения можно найти здесь: <a class="ulink" href="http://lwn.net/Articles/436012/" target="_top">http://lwn.net/Articles/436012/</a>.</p><p>Примечание: Не храните файлы, которые должны выжить при перезагрузке системы, в каталогах <code class="filename">/run</code>, <code class="filename">/var/run</code> и т.п.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-tmpdir"></a>5.6. systemd: очистка каталогов (/tmp и /var/tmp)</h3></div></div></div><p>systemd управляет каталогами так, как указано в <code class="filename">tmpfiles.d</code> и <code class="filename">/lib/systemd/system/systemd-tmpfiles-clean.timer</code>. Больше сведений вы можете найти на странице руководства <code class="filename">tmpfiles.d</code>.</p><p>По умолчанию systemd очищает <code class="filename">tmp</code> ежедневно, как указано в <code class="filename">/usr/lib/tmpfiles.d/tmp.conf</code>:</p><pre class="screen">d /tmp 1777 root root 10d
d /var/tmp 1777 root root 30d
</pre><p>Примечание: systemd игнорирует переменные sysconfig в <code class="filename">/etc/sysconfig/cron</code>, такие как <code class="literal">TMP_DIRS_TO_CLEAR</code>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.mount-usb"></a>5.7. Автомонтирование USB-носителей</h3></div></div></div><p>
    Gnome and Xfce now use <code class="literal">udisks2</code> to automatically
    mount USB media under <code class="filename">/run/media/$USER</code>.  KDE
    still uses udisks version 1 and mounts USB media under
    <code class="filename">/media</code>.

   </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.loopback"></a>5.8. Specifying Partitions for Loopback Devices</h3></div></div></div><p>
With Kernel 3.4 there are two ways to have partitions for loopback
devices. The first is with <code class="literal">max_part</code> and the second is
with the <code class="literal">-P</code> parameter to <span class="command"><strong>losetup</strong></span>.
They behave slightly differently since <code class="literal">-P</code> will
dynamically allocate minor numbers for each device (including adding or
removing them on the fly with <span class="command"><strong>blockdev
--rereadpt</strong></span>). Using the <code class="literal">max_part</code> parameter
causes each loop device to allocate that many minor numbers for each
device.
   </p><p>
So when you use <code class="literal">max_part=8</code> and do not change
<code class="literal">max_loop</code>, which defaults to <code class="literal">8</code>, you
are using all of the allocated minor numbers with the first device.
   </p><p>
The solution is either to use <code class="literal">-P</code> or to
<span class="emphasis"><em>also</em></span> use <code class="literal">max_loop</code>.
   </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id382976"></a>5.9. Сведения о часовом поясе в <code class="filename">/etc/adjtime</code></h3></div></div></div><p>Третья строка файла <code class="filename">/etc/adjtime</code> теперь содержит сведения о том, какое время установлено в часах BIOS — локальное или UTC (ранее эти сведения указывались в переменной <code class="literal">HWCLOCK</code> файла <code class="filename">/etc/sysconfig/clock</code>).</p><p>Если <code class="filename">/etc/adjtime</code> содержит неверные сведения (например, после изменения настроек даты и времени с помощью команды <span class="command"><strong>ntpdate</strong></span> или при запущенном демоне <span class="command"><strong>ntpd</strong></span>), задайте переменной <code class="literal">USE_ADJUST</code> в файле <code class="filename">/etc/sysconfig/clock</code> значение "<code class="literal">no</code>".</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id383050"></a>5.10. GNU tar по умолчанию создаёт POSIX-совместимые архивы</h3></div></div></div><p>GNU tar теперь по умолчанию работает с <code class="literal">--format=posix</code> и создаёт POSIX-совместимые архивы с расширенными заголовками PAX. Проверьте, что ваши скрипты и приложения совместимы с этим форматом.</p><p>Предыдущее поведение (как в настройках по умолчанию в апстриме) можно вернуть, задав переменную окружения:</p><pre class="screen">TAR_OPTIONS='--format=gnu'</pre><p>или</p><pre class="screen">TAR_OPTIONS='--pax-option=delete=[ac]time*'</pre></div></div></div></body></html>
