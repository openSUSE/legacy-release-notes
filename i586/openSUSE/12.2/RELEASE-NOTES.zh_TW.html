<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>openSUSE 12.2 發行紀事</title><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="zh_TW" class="article"><div class="titlepage"><div><div><h2 class="title"><a name="id2796528"></a><span class="phrase">openSUSE 12.2</span> 發行紀事</h2></div></div><hr></div><p>版本：</p><p>12.2.9 (2012-10-22)</p><p>Copyright © 2012 Novell, Inc.</p><p>在 GNU 自由文件授權(GNU Free Documentation License) 1.2 版或之後版本的規範下，您被允許複製、散佈和/或修改此文件， GNU 自由文件授權(GNU Free Documentation License)是由自由軟體基金會(Free Software Foundation)所發行。使用無恆常章節(no Invariant Sections)，無封面文字(no Front-Cover Texts)及無封底文字(no Back-Cover Texts)。此授權的複本已包含在檔案 <code class="filename">fdl.txt</code>。</p><p>如果您從較舊的 openSUSE 發行版本升級，請由此查看之前的發行紀事： <a class="ulink" href="http://en.opensuse.org/openSUSE:Release_Notes" target="_top">http://en.opensuse.org/openSUSE:Release_Notes</a></p><p>此版本摘要包括以下範圍：</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="#misc" title="1. 雜項">節 1, “雜項”</a>: 這些項目是由 openFATE，即特色與需求管理系統 (<a class="ulink" href="http://features.opensuse.org" target="_top">http://features.opensuse.org</a>)自動引入。</p><p>N/A</p></li><li class="listitem"><p><a class="xref" href="#installation" title="2. 安裝">節 2, “安裝”</a>: 如果您想要從頭開始安裝此系統，請閱讀此。</p></li><li class="listitem"><p><a class="xref" href="#general" title="3. 一般">節 3, “一般”</a>: 每個人均應閱讀的資訊。</p></li><li class="listitem"><p><a class="xref" href="#upgrade" title="4. 系統升級">節 4, “系統升級”</a>:關於從之前版本升級到此 openSUSE 版本的過程中的一些問題。</p></li><li class="listitem"><p><a class="xref" href="#technical" title="5. 技術">節 5, “技術”</a>: 本節包含數個技術變更與增強以提供給有經驗的使用者利用。</p></li></ul></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="misc"></a>1. 雜項</h2></div></div></div><p>N/A</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installation"></a>2. 安裝</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id2794883"></a>2.1. 詳細安裝資訊</h3></div></div></div><p>要獲得詳細的安裝資訊，請參閱下方的 <span class="quote">“<span class="quote">openSUSE 文件</span>”</span>。</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="general"></a>3. 一般</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.115.documentation"></a>3.1. openSUSE 文件</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>在入門指引，您可以找到有詳細步驟的安裝教學，還有 KDE 和 GNOME 桌面，以及 LibreOffice 辦公室套裝軟體的介紹。 也涵蓋了基本管理的主題，像是佈署和軟體管理以及一個 bash shell 的介紹。</p></li><li class="listitem"><p>參考涵蓋了管理，以及系統設定的細節，並解釋如何設定各種不同的網路服務。</p></li><li class="listitem"><p>保全指引會介紹系統安全的基本概念，他同時包含了本地與網路保全的觀點。</p></li><li class="listitem"><p>系統分析與微調指引會針對問題偵測、解決方案與最佳化提供幫助。</p></li><li class="listitem"><p>使用 KVM 虛擬化提供了關於用 KVM, libvirt 以及 QEMU 工具設定、管理虛擬機的介紹。</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id2794962"></a>3.2. Pre-installation Memory Test Incorrectly Identifies Good
   Memory as Bad</h3></div></div></div><p>
The pre-installation memory test (<span class="command"><strong>memtest</strong></span>) on the
openSUSE 12.2 media got miscompiled. It reports errors in test 7 on good RAM
modules. Use the openSUSE 12.1 media if you need to run
<span class="command"><strong>memtest</strong></span>.
   </p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="upgrade"></a>4. 系統升級</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.zypper-openssh"></a>4.1. 經由 "zypper dup" 遠端更新</h3></div></div></div><p>當由 openSUSE 12.1 (或更舊版本) 升級， 在安裝新的 openssh 套件升級時 openSSH 連線將關閉。如果您經由 SSH 進行 "zypper dup" 升級，請在可回復的終端多工器 (例如 "screen" 或 "tmux") 中執行 "zypper dup"，以便能輕鬆的重新連線，或至少可以對連線流失免疫(例如經由"nohup")。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.sysv"></a>4.2. sysvinit 已不再適用</h3></div></div></div><p>有些桌面元件依賴於僅由 systemd 所提供的服務。所以，雖然 openSUSE 12.2 仍具有使用 sysvinit 啟動系統作為備用的基本支援， sysvinit 還是被視為不宜使用且在某方面甚至可能造成錯誤或破壞。如果您遇到使用 sysvinit 開啟系統的問題，在回報錯誤之前先使用 systemd 開機。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.cryptoloop"></a>4.3. mount 和 losetup 放棄 cryptoloop 的支援</h3></div></div></div><p><span class="command"><strong>cryptoloop</strong></span> 具有已知的弱點，所以在幾年前已被視為過時並改用 <span class="command"><strong>dm-crypt</strong></span> 。 <span class="command"><strong>mount</strong></span> (例如，經由 <code class="filename">/etc/fstab</code>) 和 <span class="command"><strong>losetup</strong></span> 現在終於放棄 <span class="command"><strong>cryptoloop</strong></span> 的支援。 這意謂在舊的 fstab 項目中使用 <span class="command"><strong>cryptoloop</strong></span> 存取加密容器的方法已不再適用。 但此容器仍可以使用 <span class="command"><strong>dm-crypt</strong></span> (<code class="filename">/etc/crypttab</code>) 來存取。請參考 <a class="ulink" href="http://en.opensuse.org/Encrypted_Filesystems" target="_top">http://en.opensuse.org/Encrypted_Filesystems</a> 的範例看如何使用這個新方法。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="crypto-part-systemd"></a>4.4. 使用 systemd 掛載加密的分割區</h3></div></div></div><p>如果加密的分割區沒有被 systemd 自動掛載，可能是在  <code class="filename">/etc/fstab</code> 這些分割區有 <code class="literal">noauto</code> 旗標，將這旗標用 <code class="literal">nofail</code> 代替可修復此問題。例如，將下面這行：</p><pre class="screen">/dev/mapper/cr_sda3  /home   ext4    acl,user_xattr,noauto 0 2</pre><p>改成</p><pre class="screen">/dev/mapper/cr_sda3  /home   ext4    acl,user_xattr,nofail 0 2</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="technical"></a>5. 技術</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.114.kms"></a>5.1. 使用 KMS (Kernel Mode Setting) 初始化顯示卡</h3></div></div></div><p>在 openSUSE 11.3 我們已為 Intel, ATI 和 NVIDIA 顯示卡切換到 KMS (Kernel Mode Setting) ，這是我們的預設值。若您在 KMS 驅動程式支援(intel, radeon, nouveau)遇到問題，可以在核心開機指令行加上 <code class="literal">nomodeset</code> 來停用 KMS。在使用 Grub 2，我們預設的開機載入器，要永久設定此參數，請用 root 身份在您的 <code class="filename">/etc/default/grub</code> 文字檔中將它加入核心預設載入選項行 <code class="literal">GRUB_CMDLINE_LINUX_DEFAULT</code> 中，然後執行終端機指令</p><pre class="screen">sudo /usr/sbin/grub2-mkconfig --output=/boot/grub2/grub.cfg</pre><p>來讓此變更生效。 若您使用傳統 Grub，請將它加到 <code class="filename">/boot/grub/menu.lst</code> 的核心指令行中。此選項會確認相對應的核心模組(intel, radeon, nouveau)在 <code class="filename">initrd</code> 載入時會使用 <code class="literal">modeset=0</code>，也就是說，停用 KMS。</p><p>在少數情況下，當從 <code class="filename">initrd</code> 載入 DRM 模組時會產生問題，這是一個一般性的問題，和 KMS 無關，我們也可以完全在 <code class="filename">initrd</code> 停止載入 DRM 模組。要這樣做的話，用 YaST設定 sysconfig 變數 <code class="literal">NO_KMS_IN_INITRD</code> 為 <code class="literal">yes</code>，完成後會重新產生 <code class="filename">initrd</code>，接著請您重新開機。</p><p>在 Intel 顯示卡不用 KMS 的話，X伺服器會回歸到 <code class="literal">fbdev</code> 驅動程式(<code class="literal">intel</code> 驅動程式只支援 KMS); 然而對 Intel 較舊的  GPU，也可以使用 "intellegacy" 驅動程式 (<code class="systemitem">xorg-x11-driver-video-intel-legacy</code> 套件)，這個驅動程式仍支援 UMS (User Mode Setting)。要使用此驅動程式，編輯 <code class="filename">/etc/X11/xorg.conf.d/50-device.conf</code> 並變更驅動程式項目為<code class="literal">intellegacy</code>。</p><p>在 ATI 當下主流的 GPU 顯示卡則會回歸使用 <code class="literal">radeonhd</code>。在 NVIDIA 顯示卡沒有 KMS 則會使用 <code class="literal">nv</code> 驅動程式(<code class="literal"> nouveau</code> 驅動程式只支援 KMS)。注意，如果您在核心啟動參數中 指定 <code class="literal">nomodeset</code> ，較新的 ATI 和 NVIDIA GPU 會回歸 使用 <code class="literal">fbdev</code>。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-sysvinit"></a>5.2. 使用不建議的 sysvinit 開機</h3></div></div></div><p>現在 openSUSE 開機預設使用 <span class="command"><strong>systemd</strong></span>。如果遇到麻煩，您可以在開機時按 F5 來切換回使用 <span class="command"><strong>sysvinit</strong></span> 的老方法。關於使用 sysvinit 開機的詳細資訊與限制，請參閱 <a class="xref" href="#sec.122.sysv" title="4.2. sysvinit 已不再適用">節 4.2, “sysvinit 已不再適用”</a>。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-ctl"></a>5.3. systemd: 提供服務啟動參數</h3></div></div></div><p><span class="command"><strong>systemctl</strong></span> 僅支援 "標準" 參數 (詳見 <a class="ulink" href="http://www.freedesktop.org/wiki/Software/systemd/Incompatibilities" target="_top">http://www.freedesktop.org/wiki/Software/systemd/Incompatibilities</a>)。</p><p>您可以藉由直接呼叫啟動程序來迴避此新行為，例如：</p><pre class="screen">cd /etc/init.d
./apache2 &lt;您的_參數&gt;
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-shutdown"></a>5.4. systemd: 系統關機</h3></div></div></div><p>使用 <span class="command"><strong>systemd</strong></span> 時系統要停機或電源關閉，請在命令行 用 <span class="command"><strong>halt -p</strong></span> 或 <span class="command"><strong>shutdown -h now</strong></span> 或 使用您的桌面環境所提供的關機按鍵。</p><p>注意：單單 <span class="command"><strong>halt</strong></span> 命令將無法正確關閉系統。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-tmpfs"></a>5.5. systemd: 使用 tmpfs 在: /run, /var/run, /media, 等。</h3></div></div></div><p>systemd 掛載一些僅會包含變動資料的目錄為 tmpfs 檔案系統： 這些目錄包含了 <code class="filename">/run</code>, <code class="filename">/var/run</code>, <code class="filename">/var/lock</code>, 以及 <code class="filename">/media</code> 。 要知道更多的背景資訊，請參閱 <a class="ulink" href="http://lwn.net/Articles/436012/" target="_top">http://lwn.net/Articles/436012/</a>。</p><p>注意： 不要儲存任何在重開機後還需要存在的檔案在 <code class="filename">/run</code>, <code class="filename">/var/run</code>, 等目錄。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-tmpdir"></a>5.6. systemd: 清除目錄 (/tmp 以及 /var/tmp)</h3></div></div></div><p>systemd 會依照指定在 <code class="filename">tmpfiles.d</code> 目錄及 <code class="filename">/lib/systemd/system/systemd-tmpfiles-clean.timer</code> 檔案中的設定來維護目錄。 要得到更進一步的資訊，請參閱 <code class="filename">tmpfiles.d</code> 的手冊頁。</p><p>預設情況下， systemd 依照 <code class="filename">/usr/lib/tmpfiles.d/tmp.conf</code>的設定每日清除 <code class="filename">tmp</code> 目錄：</p><pre class="screen">d /tmp 1777 root root 10d
d /var/tmp 1777 root root 30d
</pre><p>注意： systemd 不會遵照在 <code class="filename">/etc/sysconfig/cron</code> 中的 sysconfig 變數，像是 <code class="literal">TMP_DIRS_TO_CLEAR</code>。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.mount-usb"></a>5.7. USB 媒體自動掛載</h3></div></div></div><p>Gnome 和 Xfce 現在使用 <code class="literal">udisks2</code> 來自動掛載 USB 媒體到 <code class="filename">/run/media/$USER</code> 目錄下。 KDE 使用 udisks 版本 1 ，仍掛載 USB 媒體到 <code class="filename">/media</code> 目錄下。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.loopback"></a>5.8. Specifying Partitions for Loopback Devices</h3></div></div></div><p>
With Kernel 3.4 there are two ways to have partitions for loopback
devices. The first is with <code class="literal">max_part</code> and the second is
with the <code class="literal">-P</code> parameter to <span class="command"><strong>losetup</strong></span>.
They behave slightly differently since <code class="literal">-P</code> will
dynamically allocate minor numbers for each device (including adding or
removing them on the fly with <span class="command"><strong>blockdev
--rereadpt</strong></span>). Using the <code class="literal">max_part</code> parameter
causes each loop device to allocate that many minor numbers for each
device.
   </p><p>
So when you use <code class="literal">max_part=8</code> and do not change
<code class="literal">max_loop</code>, which defaults to <code class="literal">8</code>, you
are using all of the allocated minor numbers with the first device.
   </p><p>
The solution is either to use <code class="literal">-P</code> or to
<span class="emphasis"><em>also</em></span> use <code class="literal">max_loop</code>.
   </p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id2849287"></a>5.9. 在 <code class="filename">/etc/adjtime</code> 中的時區資訊</h3></div></div></div><p>在 <code class="filename">/etc/adjtime</code> 的第3行，現在包含了您的 BIOS 時鐘是運行在 UTC 或地區時區的資訊(之前是儲存在 <code class="filename">/etc/sysconfig/clock</code> 的 <code class="literal">HWCLOCK</code>)。</p><p>如果 <code class="filename">/etc/adjtime</code> 包含了錯誤的偏差資訊 (例如用 <span class="command"><strong>ntpdate</strong></span> 修正日期和時間之後或有 <span class="command"><strong>ntpd</strong></span> 正在運作)，在檔案 <code class="filename">/etc/sysconfig/clock</code> 中設定變數 <code class="literal">USE_ADJUST</code> 為 "<code class="literal">no</code>" 。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id2849363"></a>5.10. GNU tar 預設會建立 POSIX-相容格式檔案</h3></div></div></div><p>GNU tar 現在預設為 <code class="literal">--format=posix</code> 並且以 PAX extended headers 建立 POSIX-相容格式檔案。請檢查您的 scripts 和應用程式和此格式是否相容。</p><p>前一版預設的行為可以藉由設定環境來重建：</p><pre class="screen">TAR_OPTIONS='--format=gnu'</pre><p>或</p><pre class="screen">TAR_OPTIONS='--pax-option=delete=[ac]time*'</pre></div></div></div></body></html>
