<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Notes de version d'openSUSE 12.2</title><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="fr" class="article"><div class="titlepage"><div><div><h2 class="title"><a name="id2682010"></a>Notes de version d'<span class="phrase">openSUSE 12.2</span></h2></div></div><hr></div><p>Version :</p><p>12.2.9 (2012-10-22)</p><p>Copyright © 2012 Novell, Inc.</p><p>Il est permis de copier, distribuer et/ou modifier ce document selon les conditions de la licence GNU Free Documentation, Version 1.2 ou n'importe quelle version plus récente publiée par la Free Software Foundation ; sans section inaltérable, sans texte de première page de couverture ni texte de dernière page de couverture. Une copie de la licence est incluse dans le fichier <code class="filename">fdl.txt</code>.</p><p>Si vous mettez à jour une ancienne installation vers cette version d'openSUSE, consultez les précédentes notes de version listées ici : <a class="ulink" href="http://en.opensuse.org/openSUSE:Release_Notes" target="_top">http://en.opensuse.org/openSUSE:Release_Notes</a></p><p>Ces notes de version traitent des points suivants :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="#misc" title="1. Divers">Section 1, « Divers »</a> : ces éléments sont automatiquement inclus à partir d'openFATE, le système de gestion des fonctionnalités et exigences fonctionnelles (<a class="ulink" href="http://features.opensuse.org" target="_top">http://features.opensuse.org</a>).</p><p>N/A</p></li><li class="listitem"><p><a class="xref" href="#installation" title="2. Installation">Section 2, « Installation »</a> : lisez ceci si vous voulez installer un nouveau système.</p></li><li class="listitem"><p><a class="xref" href="#general" title="3. Généralités">Section 3, « Généralités »</a> : les informations qui s'adressent à tous.</p></li><li class="listitem"><p><a class="xref" href="#upgrade" title="4. Mise à niveau du système">Section 4, « Mise à niveau du système »</a> : problèmes liés à une mise à niveau du système depuis la version précédente à cette version d'openSUSE.</p></li><li class="listitem"><p><a class="xref" href="#technical" title="5. Aspects techniques">Section 5, « Aspects techniques »</a> : cette section contient un certain nombre de modifications et améliorations techniques qui s'adressent à l'utilisateur expérimenté.</p></li></ul></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="misc"></a>1. Divers</h2></div></div></div><p>N/A</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installation"></a>2. Installation</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id2724617"></a>2.1. Pour des informations détaillées sur l'installation</h3></div></div></div><p>Pour des informations détaillées sur l'installation, reportez-vous à la <span class="quote">« <span class="quote">Documentation openSUSE</span> »</span> référencée ci-dessous. </p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="general"></a>3. Généralités</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.115.documentation"></a>3.1. Documentation openSUSE</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Dans le Guide de démarrage, vous trouverez des instructions d'installation étape par étape, ainsi qu'une introduction aux bureaux KDE et GNOME et à la suite LibreOffice. Les questions d'administration générale y sont également évoquées, comme le déploiement, la gestion de logiciels et une introduction au shell bash.</p></li><li class="listitem"><p>Le Guide de Référence couvre l'administration et la configuration du système en détail, et explique comment configurer divers services réseau.</p></li><li class="listitem"><p>Le Guide de la Sécurité introduit certains concepts de base de la sécurité système, couvrant à la fois les aspects de sécurité locale et réseau.</p></li><li class="listitem"><p>Le Guide d'analyse et de réglage du système aide à la détection de problèmes, à leur résolution et à l'optimisation.</p></li><li class="listitem"><p>La Virtualisation avec KVM offre une introduction à la mise en place et à la gestion de la virtualisation avec les outils KVM, libvirt et QEMU.</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id2680479"></a>3.2. Le test de mémoire pré-installation identifie de façon incorrecte la mémoire bonne comme mauvaise</h3></div></div></div><p>Le test de mémoire pré-installation (<span class="command"><strong>memtest</strong></span>) sur le média d'openSUSE 12.2 a été mal compilé. Il rapporte des erreurs au test 7 sur des modules RAM bons. Utilisez un média d'openSUSE 12.1 si vous devez utiliser la commande <span class="command"><strong>memtest</strong></span>.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="upgrade"></a>4. Mise à niveau du système</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.zypper-openssh"></a>4.1. Mise à jour distante via "zypper dup"</h3></div></div></div><p>Lors de la mise à niveau de openSUSE 12.1 (ou plus ancienne), les connexions SSH seront fermées lorsque le nouveau paquet openssh sera mis à jour. Si vous mettez à niveau via  "zypper dup" par SSH, lancer "zypper dup" dans un multiplexeur de terminal réactivable (comme "screen" ou "tmux") pour que vous puissiez vous reconnecter facilement, ou au moins être immunisé des pertes de connexion (par exemple, via "nohup").</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.sysv"></a>4.2. sysvinit obsolète</h3></div></div></div><p>Certains composants du bureau dépendent de services uniquement fournis par systemd. Bien que openSUSE 12.2 comporte encore le support de base pour démarrer un système avec sysvinit en tant que solution de secours, sysvinit est néanmoins considéré comme obsolète et même probablement défectueux ou cassé par certains aspects. Si vous avez des problèmes avec un système démarré avec sysvinit, utilisez systemd avant de remplir des rapports de bogues.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.cryptoloop"></a>4.3. mount et losetup ont abandonné le support de cryptoloop</h3></div></div></div><p><span class="command"><strong>cryptoloop</strong></span> comporte des faiblesses connues et est donc considéré comme obsolète en faveur de <span class="command"><strong>dm-crypt</strong></span> depuis des années. <span class="command"><strong>mount</strong></span> (par exemple via <code class="filename">/etc/fstab</code>) et <span class="command"><strong>losetup</strong></span> ont finalement abandonné le support de <span class="command"><strong>cryptoloop</strong></span>. Ceci signifie que les anciennes entrées fstab qui utilisent la commande  <span class="command"><strong>cryptoloop</strong></span> pour accéder aux conteneurs chiffrés ne fonctionnent plus de cette façon. Les conteneurs peuvent malgré tout encore être accédés avec <span class="command"><strong>dm-crypt</strong></span> (<code class="filename">/etc/crypttab</code>). Reportez-vous à la page <a class="ulink" href="http://en.opensuse.org/Encrypted_Filesystems" target="_top">http://en.opensuse.org/Encrypted_Filesystems</a> pour des exemples sur la façon d'utiliser la nouvelle méthode.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="crypto-part-systemd"></a>4.4. Monter des partitions cryptées avec systemd</h3></div></div></div><p>Si des partitions cryptées ne sont pas montées automatiquement avec systemd, le flag <code class="literal">noauto</code> de ces partitions dans <code class="filename">/etc/fstab</code> peut en être la cause. Remplacer ce flag par <code class="literal">nofail</code> permettra de résoudre le problème. Par exemple, modifiez la ligne suivante :</p><pre class="screen">/dev/mapper/cr_sda3  /home   ext4    acl,user_xattr,noauto 0 2</pre><p>en</p><pre class="screen">/dev/mapper/cr_sda3  /home   ext4    acl,user_xattr,nofail 0 2</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="technical"></a>5. Aspects techniques</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.114.kms"></a>5.1. Initialisation de la carte graphique avec KMS (Kernel Mode Setting)</h3></div></div></div><p>Depuis openSUSE 11.3, KMS (Kernel Mode Setting) est activé par défaut pour les cartes graphiques Intel, ATI et NVIDIA. Si vous rencontrez des problèmes avec le support de KMS par les pilotes (intel, radeon, nouveau), désactivez KMS en ajoutant <code class="literal">nomodeset</code> à la ligne de commande d'amorçage du noyau. Pour définir ceci de manière permanente avec Grub 2, le chargeur d'amorçage par défaut, ajoutez-le à la ligne des options par défaut du noyau <code class="literal">GRUB_CMDLINE_LINUX_DEFAULT</code> dans le fichier texte <code class="filename">/etc/default/grub</code> en tant que root et en lançant la commande de terminal</p><pre class="screen">sudo /usr/sbin/grub2-mkconfig --output=/boot/grub2/grub.cfg</pre><p>pour que les changements prennent effet. Sinon, pour l'ancien Grub, ajoutez-le à la ligne de commande du noyau dans <code class="filename">/boot/grub/menu.lst</code>, également en tant que root. Cette option permet de s'assurer que le module du noyau (intel, radeon, nvidia) est chargé avec <code class="literal">modeset=0</code> dans <code class="filename">initrd</code>, c'est à dire que KMS est désactivé.</p><p>Dans les rares cas où le chargement du module DRM depuis <code class="filename">initrd</code> pose problème, sans relation avec KMS, il est même possible de désactiver complètement le chargement du module DRM dans <code class="filename">initrd</code>. Pour cela, définissez la variable sysconfig <code class="literal">NO_KMS_IN_INITRD</code> à <code class="literal">yes</code> via YaST, ce qui recrée ensuite l'<code class="filename">initrd</code>. Redémarrez votre machine.</p><p>Sur Intel sans KMS, le serveur X se replie vers le pilote <code class="literal">fbdev</code> (le pilote <code class="literal">intel</code> ne supporte que KMS) ; alternativement, il existe aussi le pilote "intellegacy" (paquet <code class="systemitem">xorg-x11-driver-video-intel-legacy</code>) qui supporte toujours UMS (User Mode Setting). Pour l'utiliser, éditez <code class="filename">/etc/X11/xorg.conf.d/50-device.conf</code> et changez la valeur de driver à <code class="literal">intellegacy</code>.</p><p>Sur ATI pour les cartes graphiques actuelles, le serveur X se rabat sur <code class="literal">radeonhd</code>. Sur NVIDIA sans KMS, le pilote <code class="literal">nv</code> est utilisé (le pilote <code class="literal">nouveau</code> ne supporte que KMS). Notez que les cartes graphiques ATI et NVIDIA les plus récentes basculeront sur <code class="literal">fbdev</code> si vous spécifiez le paramètre d'amorçage du noyau <code class="literal">nomodeset</code>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-sysvinit"></a>5.2. Amorçage avec sysvinit (obsolète)</h3></div></div></div><p>Par défaut, openSUSE démarre maintenant avec <span class="command"><strong>systemd</strong></span>. En cas de problème, vous pouvez essayer de revenir à l'ancienne méthode basée sur l'obsolète <span class="command"><strong>sysvinit</strong></span> en appuyant sur la touche F5 lors de l'amorçage. Pour plus d'informations à propos des limitations lors de l'amorçage avec sysvinit, voir <a class="xref" href="#sec.122.sysv" title="4.2. sysvinit obsolète">Section 4.2, « sysvinit obsolète »</a>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-ctl"></a>5.3. systemd : fournir des paramètres de démarrage de service</h3></div></div></div><p><span class="command"><strong>systemctl</strong></span> ne supporte que des paramètres "standards" (cf. <a class="ulink" href="http://www.freedesktop.org/wiki/Software/systemd/Incompatibilities" target="_top">http://www.freedesktop.org/wiki/Software/systemd/Incompatibilities</a>).</p><p>Vous pouvez contourner ce nouveau comportement en appelant le script de démarrage directement, par exemple :</p><pre class="screen">cd /etc/init.d
./apache2 &lt;vos_parametres&gt;
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-shutdown"></a>5.4. systemd : extinction du système</h3></div></div></div><p>Pour arrêter et éteindre le système lorsque <span class="command"><strong>systemd</strong></span> est utilisé, tapez les commandes <span class="command"><strong>halt -p</strong></span> ou <span class="command"><strong>shutdown -h now</strong></span>, ou utilisez le bouton d'arrêt fourni par votre environnement de bureau.</p><p>Note : une simple commande <span class="command"><strong>halt</strong></span> n'arrêtera pas le système correctement.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-tmpfs"></a>5.5. systemd : utilisation de tmpfs : /run, /var/run, /media, etc.</h3></div></div></div><p>systemd monte plusieurs dossiers qui contiennent uniquement des données volatiles, comme les systèmes de fichier tmpfs : <code class="filename">/run</code>, <code class="filename">/var/run</code>, <code class="filename">/var/lock</code>, et <code class="filename">/media</code> sont ces dossiers. Pour plus d'informations, voir <a class="ulink" href="http://lwn.net/Articles/436012/" target="_top">http://lwn.net/Articles/436012/</a>.</p><p>Note : ne sauvegardez pas des fichiers qui doivent survivre à un redémarrage dans <code class="filename">/run</code>, <code class="filename">/var/run</code>, etc.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-tmpdir"></a>5.6. systemd : nettoyage des dossiers (/tmp et /var/tmp)</h3></div></div></div><p>systemd assure la maintenance des dossiers comme spécifié dans le dossier <code class="filename">tmpfiles.d</code> et dans <code class="filename">/lib/systemd/system/systemd-tmpfiles-clean.timer</code>. Pour plus d'informations, voir la page de manuel de <code class="filename">tmpfiles.d</code>.</p><p>Par défaut, systemd nettoie le dossier <code class="filename">tmp</code> comme configuré dans <code class="filename">/usr/lib/tmpfiles.d/tmp.conf</code> :</p><pre class="screen">d /tmp 1777 root root 10d
d /var/tmp 1777 root root 30d
</pre><p>Note : systemd n'honore pas les variables sysconfig dans <code class="filename">/etc/sysconfig/cron</code> telles que <code class="literal">TMP_DIRS_TO_CLEAR</code>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.mount-usb"></a>5.7. Auto-montage des médias USB</h3></div></div></div><p>Gnome et Xfce utilisent maintenant <code class="literal">udisks2</code> pour monter automatiquement les médias USB sous <code class="filename">/run/media/$USER</code>. KDE utilise udisks version 1 et monte les médias USB sous <code class="filename">/media</code>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.loopback"></a>5.8. Spécification des partitions pour les périphériques de type boucle (loopback)</h3></div></div></div><p>Avec le noyau 3.4, il existe deux façons d'avoir des partitions pour les périphériques de type boucle. La première utilise <code class="literal">max_part</code> et la seconde le paramètre <code class="literal">-P</code>pour <span class="command"><strong>losetup</strong></span>. Ils se comportent de façon légèrement différente puisque  <code class="literal">-P</code> allouera dynamiquement le nombre mineur pour chaque périphérique (ce qui inclut leur ajout et leur suppression à la volée avec <span class="command"><strong>blockdev --rereadpt</strong></span>). En utilisant le paramètre <code class="literal">max_part</code>, chaque périphérique de type loop allouera autant de nombres mineurs pour chaque périphérique.</p><p>Donc lorsque vous utilisez <code class="literal">max_part=8</code> et que vous ne changez pas <code class="literal">max_loop</code>, qui est par défaut à <code class="literal">8</code>, vous utiliserez tous les nombres mineurs alloués avec le premier périphérique.</p><p>La solution est d'utiliser <code class="literal">-P</code> ou bien d'utiliser <span class="emphasis"><em>également</em></span> <code class="literal">max_loop</code>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id2734836"></a>5.9. Information de fuseau horaire dans <code class="filename">/etc/adjtime</code></h3></div></div></div><p>La troisième ligne de <code class="filename">/etc/adjtime</code> contient maintenant des informations pour savoir si votre horloge BIOS est réglée sur UTC ou sur une zone locale (réglage précédemment enregistré dans  <code class="literal">HWCLOCK</code> dans <code class="filename">/etc/sysconfig/clock</code>).</p><p>Si <code class="filename">/etc/adjtime</code> contient une information erronée (par exemple après avoir réglé la date et l'heure avec <span class="command"><strong>ntpdate</strong></span> ou avec <span class="command"><strong>ntpd</strong></span> lancé), définissez la variable <code class="literal">USE_ADJUST</code> sur "<code class="literal">no</code>" dans <code class="filename">/etc/sysconfig/clock</code>.</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id2734914"></a>5.10. Valeurs par défaut de GNU tar pour créer des archives conforme à POSIX</h3></div></div></div><p>GNU tar utilise maintenant par défaut <code class="literal">--format=posix</code> et crée des archives conforme à POSIX avec des entêtes étendus PAX. Vérifiez que vos scripts et applications sont compatibles avec ce format.</p><p>L'ancien comportement (et par défaut du projet parent) peut être retrouvé en définissant les variables d'environnement :</p><pre class="screen">TAR_OPTIONS='--format=gnu'</pre><p>ou</p><pre class="screen">TAR_OPTIONS='--pax-option=delete=[ac]time*'</pre></div></div></div></body></html>
