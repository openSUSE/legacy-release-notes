<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>openSUSE 12.2 リリースノート</title><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div lang="ja" class="article"><div class="titlepage"><div><div><h2 class="title"><a name="id2742013"></a><span class="phrase">openSUSE 12.2</span> リリースノート</h2></div></div><hr></div><p>バージョン:</p><p>12.2.9 (2012-10-22)</p><p>Copyright © 2012 Novell, Inc.</p><p>この文書を、フリーソフトウエア財団発行の GNU フリー文書利用許諾契約書(バージョン1.2かそれ以降から一つを選択)が定める条件の下で複製、頒布、あるいは改変することを許可する。変更不可部分、表カバーテキスト、裏カバーテキストは存在しない。この利用許諾契約書の複製物は <code class="filename">fdl.txt</code> ファイルに含まれている。</p><p>openSUSE の旧バージョンからアップグレードした場合は、下記に示す旧バージョンのリリースノートもお読みください: <a class="ulink" href="http://ja.opensuse.org/openSUSE:Release_Notes" target="_top">http://ja.opensuse.org/openSUSE:Release_Notes</a></p><p>このリリースノートでは、次の分野に関する情報を掲載しています。</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="#misc" title="1. その他">「その他」</a>: これらの項目は、いずれも openFATE (機能や要件を管理するシステム (<a class="ulink" href="http://features.opensuse.org" target="_top">http://features.opensuse.org</a>)) から自動的に取り込まれたものです。</p><p>N/A</p></li><li class="listitem"><p><a class="xref" href="#installation" title="2. インストール">「インストール」</a>: 何もない状態からシステムをインストールする際に、読むべき項目です。</p></li><li class="listitem"><p><a class="xref" href="#general" title="3. 全般">「全般」</a>: すべてのユーザを対象とした情報です。</p></li><li class="listitem"><p><a class="xref" href="#upgrade" title="4. システムアップグレード">「システムアップグレード」</a>: openSUSE 旧バージョンから、本バージョンにシステムアップグレードした場合に、発生しうる問題点です。</p></li><li class="listitem"><p><a class="xref" href="#technical" title="5. テクニカル">「テクニカル」</a>: この章には、知識のあるユーザのための技術的な変更点や、改良点が多く記載されています。</p></li></ul></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="misc"></a>1. その他</h2></div></div></div><p>N/A</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installation"></a>2. インストール</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id3051664"></a>2.1. インストールに関する詳細情報</h3></div></div></div><p>インストールについて詳しくは、下記に示す <span class="quote">「<span class="quote">openSUSE ドキュメンテーション</span>」</span> をお読みください。</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="general"></a>3. 全般</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.115.documentation"></a>3.1. openSUSE ドキュメンテーション</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>スタートアップマニュアルではインストール作業を順を追って読むことができるほか、 KDE や Gnome デスクトップ、そして LibreOffice スイートに関する紹介が書かれています。また、配置やソフトウエア管理などの基本的な管理作業のほか、 bash シェルの紹介などが書かれています。</p></li><li class="listitem"><p>リファレンスではシステム管理や設定をそれぞれ詳細に説明しているほか、様々なネットワークサービスの設定方法についても言及しています。</p></li><li class="listitem"><p>セキュリティガイドでは、システムセキュリティに関する基本コンセプトや、ローカル環境とネットワーク環境におけるセキュリティ概要を説明しています。</p></li><li class="listitem"><p>システム分析およびチューニングガイドでは、問題の発見や解決、および最適化に関する事項を説明しています。</p></li><li class="listitem"><p>KVM による仮想化では、 KVM や libvirt, QEMU の各種ツールを利用した仮想化について、設定方法や管理方法を紹介しています。</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id3007556"></a>3.2. インストール前のメモリテストにおけるメモリエラー報告について</h3></div></div></div><p>openSUSE 12.2 のメディア内に同梱されている、インストール前に実行できるメモリテストプログラム (<span class="command"><strong>memtest</strong></span>) は、誤った設定でコンパイルしてしまったため、正常なメモリモジュールでもテスト 7 でエラーを報告してしまいます。 <span class="command"><strong>memtest</strong></span> を実行する必要がある場合は、openSUSE 12.1 のメディアをご利用ください。</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="upgrade"></a>4. システムアップグレード</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.zypper-openssh"></a>4.1. "zypper dup" によるリモートからの更新について</h3></div></div></div><p>openSUSE 12.1 (またはそれ以前) からアップグレードする場合、新しい openssh パッケージがアップグレードされたタイミングで、openSSH の接続が切断されます。 SSH 経由で "zypper dup" を利用してアップグレードする場合は、レジューム機能に対応した端末マルチプレクサ("screen" や "tmux" など) 内で "zypper dup" を実行して容易に再接続できるようにするか、もしくは少なくとも接続が切断されても処理が中断しない ("nohup" など) ようにしてください。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.sysv"></a>4.2. 従来の sysvinit について</h3></div></div></div><p>デスクトップのコンポーネントによっては、 systemd でのみ起動できるサービスを必要とするものがあります。 openSUSE 12.2 では、従来の sysvinit による起動も基本的にサポートしていますが、 sysvinit は古いバージョンとして取り扱われているため、何らかの問題やエラーを引き起こす可能性が考えられます。 sysvinit で起動したシステムで、何らかの問題が発生した場合は、バグ報告を行なう前に systemd に切り替えてみてください。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.cryptoloop"></a>4.3. mount および losetup における cryptoloop サポートの廃止について</h3></div></div></div><p><span class="command"><strong>cryptoloop</strong></span> には既知の脆弱性が存在するため、既に何年もの間、代替となる <span class="command"><strong>dm-crypt</strong></span> への置き換えが進められてきました。そのため、 <span class="command"><strong>mount</strong></span> (たとえば <code class="filename">/etc/fstab</code> 経由) や <span class="command"><strong>losetup</strong></span> では、 <span class="command"><strong>cryptoloop</strong></span> へのサポートが廃止されました。これにより、 <span class="command"><strong>cryptoloop</strong></span> を使用している古い fstab の項目が存在し、そこから暗号化されたコンテナにアクセスしている場合、アクセスが失敗するようになります。これらの項目は、<span class="command"><strong>dm-crypt</strong></span> (<code class="filename">/etc/crypttab</code> 内) に置き換えることで、アクセスできるようになります。新しい設定方法の例について、詳しくは <a class="ulink" href="http://ja.opensuse.org/Encrypted_Filesystems" target="_top">http://ja.opensuse.org/Encrypted_Filesystems</a> をお読みください。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="crypto-part-systemd"></a>4.4. systemd を利用する場合の、暗号化されたパーティションのマウント</h3></div></div></div><p>systemd を利用し、かつ暗号化パーティションを自動的にマウントしない場合、<code class="filename">/etc/fstab</code> 内に <code class="literal">noauto</code> フラグを設定すると、問題が発生する場合があります。この場合は、左記のフラグを<code class="literal">nofail</code> に置き換えることで問題を解決することができます。たとえば下記のような行があった場合:</p><pre class="screen">/dev/mapper/cr_sda3  /home   ext4    acl,user_xattr,noauto 0 2</pre><p>上記を下記のように修正します:</p><pre class="screen">/dev/mapper/cr_sda3  /home   ext4    acl,user_xattr,nofail 0 2</pre></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="technical"></a>5. テクニカル</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.114.kms"></a>5.1. KMS を利用したグラフィックの初期化 (カーネルモード設定)</h3></div></div></div><p>openSUSE 11.3 以降で Intel, ATI, NVIDIA の各グラフィックカードをご利用の場合、 KMS (Kernel Mode Setting; カーネルモード設定) を既定値として使用するようになっています。 KMS ドライバ (intel, radeon, nouveau) を使用するにあたって何らかの問題が発生した場合は、起動時に設定するカーネルのコマンドラインに <code class="literal">nomodeset</code> を追加することで、 KMS を無効化することができます。この設定を既定のブートローダである GRUB 2 に対して恒久的に適用するには、 root で <code class="filename">/etc/default/grub</code> のテキストファイルを編集し、カーネルの既定の読み込みオプション <code class="literal">GRUB_CMDLINE_LINUX_DEFAULT</code> に対して、前述の設定を追加してください。作業が終わったら、最後に下記のコマンドを実行します:</p><pre class="screen">sudo /usr/sbin/grub2-mkconfig --output=/boot/grub2/grub.cfg</pre><p>上記を実行すると、反映を行なうことができます。 GRUB Legacy をお使いの場合は、同じく root で <code class="filename">/boot/grub/menu.lst</code> のテキストファイルを編集し、 カーネルのコマンドラインの場所に上記を指定してください。なお、この設定を行なうと対応するカーネルモジュール (intel, radeon, nouveau) が <code class="filename">initrd</code> 内から <code class="literal">modeset=0</code> のパラメータを付けて読み込まれます。これにより KMS が無効になります。</p><p>またごく稀なケースとして、 DRM モジュールを <code class="filename">initrd</code> から読み込む際に、何らかの一般的な (KMS に関係しない) 問題が発生する場合があります。この場合は <code class="filename">initrd</code> 内から DRM モジュールを完全に読み込まないように設定することもできます。この設定を行なうには、 YaST の sysconfig エディタを利用して <code class="literal">NO_KMS_IN_INITRD</code> の変数を <code class="literal">yes</code> に設定したあと、 <code class="filename">initrd</code> を作り直してシステムを再起動してください。</p><p>Intel グラフィックカードをお使いの場合、 KMS を無効化すると X サーバが <code class="literal">fbdev</code> ドライバを利用するようになります (<code class="literal">intel</code> ドライバは KMS にしか対応していないため) 。その代わり、 UMS (ユーザモード設定;つまり KMS を無効化した状態) への対応として、 "intellegacy" ドライバ (<code class="systemitem">xorg-x11-driver-video-intel-legacy</code> パッケージ) があります。これを利用するには、 <code class="filename">/etc/X11/xorg.conf.d/50-device.conf</code> ファイルを編集し、ドライバの項目で <code class="literal">intellegacy</code> を指定してください。</p><p>ATI グラフィックカードをお使いの場合、新しい GPU であれば KMS を無効化すると <code class="literal">radeonhd</code>ドライバを利用するようになります。また、 NVIDIA グラフィックカードの場合は KMS を無効化すると <code class="literal">nv</code>ドライバを利用するようになります (<code class="literal">nouveau</code> ドライバも KMS にしか対応していないため) 。なお、カーネルの起動パラメータとして <code class="literal">nomodeset</code> を指定すると、新しい ATI グラフィックカードの場合も、新しい NVIDIA のカードの場合も、 <code class="literal">fbdev</code> ドライバを利用するようになります。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-sysvinit"></a>5.2. 従来の起動システムである sysvinit について</h3></div></div></div><p>現在のバージョンの openSUSE では、既定で <span class="command"><strong>systemd</strong></span> を利用するようになりました。何らかのトラブルが発生した場合は、起動時に F5 を押すことで、従来の <span class="command"><strong>sysvinit</strong></span> での起動を行なうことができます。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-ctl"></a>5.3. systemd: サービスの起動パラメータに対する設定</h3></div></div></div><p><span class="command"><strong>systemctl</strong></span> では "標準" パラメータ (standard parameters) (詳しくは <a class="ulink" href="http://www.freedesktop.org/wiki/Software/systemd/Incompatibilities" target="_top">http://www.freedesktop.org/wiki/Software/systemd/Incompatibilities</a> をお読みください) のみに対応しています。</p><p>起動スクリプトを直接呼び出すことで、この動作を回避したい場合は、下記のように実行します:</p><pre class="screen">cd /etc/init.d
./apache2 &lt;パラメータ類&gt;
</pre></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-shutdown"></a>5.4. systemd: システムのシャットダウン</h3></div></div></div><p><span class="command"><strong>systemd</strong></span> を利用している環境で、システムのシャットダウンや電源を切りたい場合、コマンドラインの場合は <span class="command"><strong>halt -p</strong></span> または <span class="command"><strong>shutdown -h now</strong></span> を実行してください。お使いのデスクトップ環境に用意されているシャットダウンボタンでもかまいません。</p><p>注意: 単純な <span class="command"><strong>halt</strong></span> コマンドでは、システムを正しく終了させることができません。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-tmpfs"></a>5.5. systemd: /run, /var/run, /media などにおける tmpfs の使用について</h3></div></div></div><p>systemd では、一時的なデータのみを保管するため、 tmpfs ファイルシステムでマウントするディレクトリがあります。これには <code class="filename">/run</code>, <code class="filename">/var/run</code>, <code class="filename">/var/lock</code>,<code class="filename">/media</code> などがあります。背景となる情報について、詳しくは <a class="ulink" href="http://lwn.net/Articles/436012/" target="_top">http://lwn.net/Articles/436012/</a> をお読みください。</p><p>注意: <code class="filename">/run</code>, <code class="filename">/var/run</code> などのディレクトリには、再起動後にも残しておきたいデータは配置しないでください。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.121.systemd-tmpdir"></a>5.6. systemd: ディレクトリのクリーンアップ (/tmp と /var/tmp)</h3></div></div></div><p>systemd では、 <code class="filename">tmpfiles.d</code> ディレクトリと <code class="filename">/lib/systemd/system/systemd-tmpfiles-clean.timer</code> の設定に従ってディレクトリを管理します。詳しくは <code class="filename">tmpfiles.d</code> のマニュアルページをお読みください。</p><p>既定では、 systemd は <code class="filename">/usr/lib/tmpfiles.d/tmp.conf</code> の設定に従って、毎日 <code class="filename">tmp</code> ディレクトリをクリーンアップします:</p><pre class="screen">d /tmp 1777 root root 10d
d /var/tmp 1777 root root 30d
</pre><p>注意: systemd は <code class="filename">/etc/sysconfig/cron</code> 内の変数、たとえば <code class="literal">TMP_DIRS_TO_CLEAR</code> などのシステム設定を読み込まないことに注意してください。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.mount-usb"></a>5.7. USB メディアの自動マウント</h3></div></div></div><p>GNOME や XFce では、 USB メディアを <code class="filename">/run/media/$USER</code> 以下に自動マウントする目的で、<code class="literal">udisks2</code> を使用するようになりました。 KDE では現在も udisks バージョン 1 を使用し、 <code class="filename">/media</code> 以下にマウントを行ないます。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="sec.122.loopback"></a>5.8. ループバックデバイスに対するパーティションの指定について</h3></div></div></div><p>カーネルバージョン 3.4 では、ループバックデバイスに対してパーティション数を設定する際、 2 つの方法で行なうことができます。 1 つは <code class="literal">max_part</code> を指定する方法、もう 1 つは <span class="command"><strong>losetup</strong></span> に対して <code class="literal">-P</code> パラメータを指定する方法です。 <code class="literal">-P</code> パラメータを使用した場合は、それぞれのデバイスに対して動的に番号を割り当てる動作 (<span class="command"><strong>blockdev --rereadpt</strong></span> を利用することで、その場で追加したり削除したりすることもできます) になるほか、 <code class="literal">max_part</code> パラメータでは、それぞれのデバイスに対して同じだけのマイナー番号を割り当てる動作になり、それぞれ違った挙動を示します。</p><p>そのため、 <code class="literal">max_part=8</code> を指定して <code class="literal">max_loop</code> の値 (既定値 <code class="literal">8</code>) を変更しないと、最初のデバイスに対して全てのマイナー番号が割り当てられてしまいます。</p><p>このような場合は、 <code class="literal">-P</code> を指定するか、 <code class="literal">-P</code> と <code class="literal">max_loop</code> を <span class="emphasis"><em>併用</em></span> してください。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id3062116"></a>5.9. <code class="filename">/etc/adjtime</code> 内のタイムゾーン情報</h3></div></div></div><p><code class="filename">/etc/adjtime</code> の 3 行目に、お使いの BIOS 内の時計が UTC に設定されているのか、もしくはローカルのタイムゾーンに設定されているのかを示す情報を書き込むようになりました (以前は <code class="filename">/etc/sysconfig/clock</code> 内の <code class="literal">HWCLOCK</code> で設定していました) 。</p><p>もしも <code class="filename">/etc/adjtime</code> 内に誤ったドリフト情報が含まれている場合 (たとえば <span class="command"><strong>ntpdate</strong></span> を実行したり、 <span class="command"><strong>ntpd</strong></span> を動作させたりして、日時を修正した場合) は、 <code class="filename">/etc/sysconfig/clock</code>内の <code class="literal">USE_ADJUST</code> を、 "<code class="literal">no</code>" に設定してください。</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="id3062199"></a>5.10. GNU tar における POSIX 準拠のアーカイブ作成について</h3></div></div></div><p>GNU tar は、既定で <code class="literal">--format=posix</code> オプションが設定されるようになりました。これにより、 PAX 拡張ヘッダ付きのPOSIX 準拠のアーカイブを作成します。お使いのスクリプトやアプリケーションが、この形式に対応しているかどうかをご確認ください。</p><p>従来の動作 (かつ提供元の既定値) に戻すには、環境変数を下記のように設定します:</p><pre class="screen">TAR_OPTIONS='--format=gnu'</pre><p>または</p><pre class="screen">TAR_OPTIONS='--pax-option=delete=[ac]time*'</pre></div></div></div></body></html>
