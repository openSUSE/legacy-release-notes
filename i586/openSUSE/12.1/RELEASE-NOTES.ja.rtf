
 <h1>openSUSE 12.1 リリースノート</h1>
 <p>バージョン:</p>
 <p>12.1.12 (2012-04-13)</p>

 <p>Copyright © 2012 Novell, Inc.</p>
 <p>この文書を、フリーソフトウエア財団発行の GNU フリー文書利用許諾契約書(バージョン1.2かそれ以降から一つを選択)が定める条件の下で複製、頒布、あるいは改変することを許可する。変更不可部分、表カバーテキスト、裏カバーテキストは存在しない。この利用許諾契約書の複製物は <tt>fdl.txt</tt> ファイルに含まれている。</p>


 

 

 
 

 
 <p>openSUSE の旧バージョンからアップグレードした場合は、下記に示す旧バージョンのリリースノートもお読みください: <tt>http://ja.opensuse.org/openSUSE:Release_Notes</tt></p>

 
 
 <p>このリリースノートでは、次の分野に関する情報を掲載しています。</p>

 <ul>
  <li>
   <p>その他: これらの項目は、いずれも openFATE (機能や要件を管理するシステム (<tt>http://features.opensuse.org</tt>)) から自動的に取り込まれたものです。</p>
   <p>現時点では、これらの項目順序に意味はありません。現在改善作業中です。</p>
  </li>

 <li>
   <p>インストール: 何もない状態からシステムをインストールする際に読むべき項目です。</p>
  </li>

 <li>
   <p>一般: すべてのユーザを対象とした情報です。</p>
  </li>

  <li><p>システムアップグレード: openSUSE 旧バージョンから、本バージョンにシステムアップグレードした場合に、発生しうる問題点です。</p></li>

  <li><p>テクニカル: この章には、上級ユーザのための技術的な変更点や改良点が多く記載されています。</p></li>
 </ul>


  <h2>その他</h2>
    <h3>YaST AppArmor 設定モジュール</h3><p><tt>https://features.opensuse.org/305278</tt>: AppArmor, YaST に関する FATE カテゴリです。</p>

<p>AppArmor 設定モジュールは、 YaST コントロールセンター内の"セキュリティとユーザ" 内にあります。</p>


  




 
  <h2>インストール</h2>
  
  
   <h3>インストールに関する詳細情報</h3>

  <p>インストールについて詳しくは、下記に示す 
  "openSUSE ドキュメンテーション"
 をお読みください。</p>
  

 

 
  <h2>全般</h2>

  
  
   <h3>openSUSE ドキュメンテーション</h3>

   <ul>
    <li><p>スタートアップマニュアルではインストール作業を順を追って読むことができるほか、 KDE や Gnome デスクトップ、そして LibreOffice スイートに関する紹介が書かれています。また、配置やソフトウエア管理などの基本的な管理作業のほか、 bash シェルの紹介などが書かれています。</p></li>
    <li>
     <p>リファレンスではシステム管理や設定をそれぞれ詳細に説明しているほか、様々なネットワークサービスの設定方法についても言及しています。</p>
    </li>
    <li><p>セキュリティガイドでは、システムセキュリティに関する基本コンセプトや、ローカル環境とネットワーク環境におけるセキュリティ概要を説明しています。</p></li>
    <li><p>システム分析およびチューニングガイドでは、問題の発見や解決、および最適化に関する事項を説明しています。</p>
    </li>
    <li><p>KVM による仮想化では、 KVM や libvirt, QEMU の各種ツールを利用した仮想化について、設定方法や管理方法を紹介しています。</p>
    </li>
   </ul>
  

  
   <h3>GNOME 3</h3>
   
   <p>GNOME 3 では GNOME 2 とは異なるデスクトップ設計を提供しています。そのため、ユーザに変更によるメリットを提供する目的から、お使いの GNOME 2 デスクトップの外観は自動では移行されないようになっています。 GNOME 3 では システム設定でカスタマイズを行なうことができるほか、より細かいカスタマイズのための高度なツール (<tt>gnome-tweak-tool</tt>) が用意されています。</p>
   <p>GNOME 3 における標準モードでは、グラフィックドライバに対して 3D アクセラレーション機能を求めるようになっています。 3D アクセラレーション機能が利用できない場合、 GNOME 3 はフォールバックモードを使用するようになります。 GNOME 3 側で3D アクセラレーション機能を検出しているにも関わらず、標準モードが利用できない場合は、グラフィックドライバのバグに遭遇している可能性があります。この場合は、grub の起動パラメータに "<tt>gnome.fallback=1</tt>" を追加して、強制的にフォールバックモードになるよう設定してください。</p>
   <p>フォールバックモードをご利用になる場合は、パネルのカスタマイズの際、Alt キーを押しながらマウスの右ボタンを押すことに注意してください。</p>
   <p>キーバインディングやドラッグ＆ドロップ機能、特殊なユーティリティなど、多数の GNOME Shell 機能に関する概要説明は、 <tt>https://live.gnome.org/GnomeShell/CheatSheet</tt> をお読みください。</p>
  

  
   <h3>PulseAudio サウンドシステム</h3>
   
   <p>PulseAudio サウンドシステムがシステム全体に統合され、新規インストールの場合は既定で有効になるようになりました。以前のリリースで無効化していた場合で、今回から有効にしたい場合は、 <tt>/etc/sysconfig/sound</tt> 内の<tt>PULSEAUDIO_ENABLE</tt> 変数をご確認ください:</p>

   <p><tt>PULSEAUDIO_ENABLE</tt> を "<tt>yes</tt>" にすると、PulseAudio を全ての場合において強制的に有効化します。 <tt>PULSEAUDIO_ENABLE</tt> を "<tt>no</tt>" にすると、 PulseAudio を完全に無効化します。また、 "custom" を設定すると、カスタムな設定を維持するようになります。</p>
  


  
   
   <h3>Btrfs</h3>
   <p>btrfs は Linux 向けの次世代ファイルシステムです。この新技術はプレビューとして用意されているもので、 btrfs のパーティションを作成したり、システム全体を btrfs で作成したりすることができます。</p>

   <p>注意: btrfs ファイルシステムは現在も鋭意開発が進められているものであり、チェックや修復の機能 ("scrub" と呼びます) は、最近になって追加されたものです。 "scrub" は、ツリー構造が正常であることを前提にして、データとメタデータを検証するためのものです; この仕組みは、ファイルシステムがマウント中であっても定期的に動作させることができるもので、通常動作の際はバックグラウンドプロセスとして起動します。</p>

   <p>このような事情から、ファイルシステム内にデータを保存する際には、細心の注意を払っておくことをお勧めするほか、冗長性やバックアップなど、障害対策を実施しておくことをお勧めします。詳しくは <tt>http://btrfs.wiki.kernel.org</tt> をお読みください。</p>

   <p>また、 btrfs にはファイルシステムのスナップショット機能など、多数の興味深い新機能が用意されています。スナップショットとロールバックの機能は、 <tt>snapper</tt> というコマンドで制御できるほか、openSUSE のパッケージや <tt>zypper</tt> 、 YaST などのシステム管理ツールに統合済みです。</p>
  

  
   
   <h3>KDM を利用した Windows ドメインのログオン</h3>

   <p>SUSE 版の KDM テーマでは、 Windows ドメインのユーザによるログオンを許可していません。</p>

   <p>この問題を回避するには、 <tt>/etc/sysconfig/displaymanager</tt> 内の DISPLAYMANAGER_KDM_THEME の値を空文字に設定して、既定の KDM テーマを使用してください:</p>

   <pre>DISPLAYMANAGER_KDM_THEME=""</pre>
  

  
   <h3>Oracle Java の提供形態変更</h3>
   <p>java-1_6_0-sun パッケージは、ライセンスの変更により openSUSE 内に含まれなくなりました。 OpenJDK をその代替として提供しています。 openSUSE で OpenJDKではなく Oracle JDK バイナリ版を使用したい場合は、 Oracle 版を<tt>http://oracle.com/java</tt> からダウンロードしてください。</p>
  

  
   
   <h3>32 ビット版の XEN ハイパーバイザの削除</h3>

   <p>32 ビット版の XEN ハイパーバイザは提供されなくなりました。32 ビット版／64 ビット版のいずれの仮想ゲストの場合とも、 64 ビット版の XEN ハイパーバイザをお使いください。</p>
  

  
  
  
   <h3>Windows 8 Server における大容量ディスクのパーティションについて</h3>
   <p>ゲストに対して大容量の (50GB より大きな) ディスクを <tt>.vhdx</tt> 形式で割り当てると、Windows 8 Server をホストとする場合、ゲストのインストールに失敗します。この問題に対しては、固定サイズの仮想ディスクイメージを使用するか、もしくは Powershell を利用して動的なサイズのディスクイメージを作成することで回避することができます。</p>

   <dl>
    
     <dt>この問題の背景となる技術情報</dt>
     <dd>
      <p><tt>.vhd</tt> および <tt>.vhdx</tt> のイメージは、スパース (疎らな) ファイルと呼ばれる形式で作成されます。たとえば <tt>.vhdx</tt> を最大サイズ 127 GB で作成すると、初期サイズはおおよそ 256KB になります。これは <tt>.vhdx</tt> の既定のブロックサイズが 32 MB であるためで、作成されたスパースファイルの各セクタに対して 512 バイトずつ書き込むと、 32 MB になるためです。 <tt>ext3</tt> では MBR やスーパーブロック、バックアップのスーパーブロック、 inode 、ディレクトリなどをそれぞれ割り当てることから、このサイズになります。また <tt>ext3</tt> では、ディスク上でデータの構造や既定のブロックサイズが何になっているのかによって異なる、最適以下の IO を提供する仕組みであるため、 <tt>.vhdx</tt> ファイルで大容量のパーティションを使用すると、フォーマットすることで実際の割り当てが行なわれるようになります。この問題に対しては、既定の 32 MB より大きな 1 MB のブロックサイズを使用することで回避できます。</p>
      <p>なお、ユーザインターフェイスを利用してブロックサイズを変更するような機能は用意されていませんので、 VHDx ファイルは Powershell を利用して作成した場合にのみ変更可能になります。ブロックサイズを変更して VHD ファイルを作成するには、下記のように実行します (下記は 1 行で記述します):</p>

<pre>New-VHD -Path C:\MyVHDs\test.vhdx -SizeBytes (127GB)
  -Dynamic -BlockSizeBytes (1MB) -VHDFormat vhdx</pre>
     </dd>
    
   </dl>
  

  
   
   <h3>postfix の設定</h3>

   <p><tt>SuSEconfig</tt> の postfix モジュールは、提供されなくなりました。そのため、 <tt>/etc/sysconfig/postfix</tt> や <tt>/etc/sysconfig/mail</tt> で値を設定しても、 <tt>SuSEconfig</tt> の実行で postfix の設定ファイルに書き込むようなことはありません。</p>

   <p>sysconfig の値を変更した場合は、手作業で <tt>root</tt> になり、 <tt>/usr/sbin/SuSEconfig.postfix</tt>を実行してください。</p>
  

 

 
  <h2>システムアップグレード</h2>

  
   
   <h3>dm-crypt で暗号化されたパーティションのマウント</h3>

   <p>古い SUSE システムでは、現在では古くなってしまった技術を利用して、 <tt>/etc/cryptotab</tt> ファイル経由でデバイスの設定を行なっていました。 12.1 では、 dm-crypt を利用する場合、 <tt>/etc/crypttab</tt> ('o' が無くなっていることに注意してください！)を利用してマウントを行ないます。古くから存在するシステムで、 <tt>cryptotab</tt> ファイルのみ存在するシステムの場合は、<tt>convert_cryptotab</tt> コマンドを実行し、 <tt>crypttab</tt> ファイルと <tt>fstab</tt> ファイルにどのような項目を書くべきかを表示させ、その手順に従って作業を行なってください。</p>
  

  
   
   <h3>systemd を利用する場合の、暗号化されたパーティションのマウント</h3>
   <p>systemd を利用し、かつ暗号化パーティションを自動的にマウントしない場合、<tt>/etc/fstab</tt> 内に <tt>noauto</tt> フラグを設定すると、問題が発生する場合があります。この場合は、左記のフラグを<tt>nofail</tt> に置き換えることで問題を解決することができます。たとえば下記のような行があった場合:</p>

<pre>/dev/mapper/cr_sda3  /home   ext4    acl,user_xattr,noauto 0 2</pre>
<p>上記を下記のように修正します:</p>
<pre>/dev/mapper/cr_sda3  /home   ext4    acl,user_xattr,nofail 0 2</pre>
  
 


 
  <h2>テクニカル</h2>
  
  
   <h3>KMS を利用したグラフィックの初期化 (カーネルモード設定)</h3>
   
   <p>openSUSE 11.3 以降で Intel, ATI, NVIDIA の各グラフィックカードをご利用の場合、 KMS (Kernel Mode Setting; カーネルモード設定) を既定値として使用するようになっています。 KMS ドライバ (intel, radeon, nouveau) を使用するにあたって何らかの問題が発生した場合は、起動時に設定するカーネルのコマンドラインに <tt>nomodeset</tt> を追加することで、 KMS を無効化することができます。この設定を恒久的に使用する場合は、 <tt>/boot/grub/menu.lst</tt> ファイル内のカーネルのコマンドラインの場所に上記を指定してください。なお、この設定を行なうと対応するカーネルモジュール (intel, radeon, nouveau) が<tt>initrd</tt> 内から <tt>modeset=0</tt> のパラメータを付けて読み込まれます。これにより KMS が無効になります。</p>

   <p>またごく稀なケースとして、 DRM モジュールを <tt>initrd</tt> から読み込む際に何らかの一般的な (KMS に関係しない)問題が発生する場合があります。この場合は <tt>initrd</tt> 内から DRM モジュールを完全に読み込まないように設定することもできます。この設定を行なうには、 YaST の sysconfig エディタを利用して <tt>NO_KMS_IN_INITRD</tt> の変数を <tt>yes</tt> に設定したあと、 <tt>initrd</tt> を作り直してシステムを再起動してください。</p>

   <p>Intel グラフィックカードをお使いの場合、 KMS を無効化すると X サーバが <tt>fbdev</tt> ドライバを利用するようになります (<tt>intel</tt> ドライバは KMS にしか対応していないため) 。その代わり、 UMS (ユーザモード設定;つまり KMS を無効化した状態) への対応として、 "intellegacy" ドライバ (<tt>xorg-x11-driver-video-intel-legacy</tt> パッケージ) があります。これを利用するには、 <tt>/etc/X11/xorg.conf.d/50-device.conf</tt> ファイルを編集し、ドライバの項目で <tt>intellegacy</tt> を指定してください。</p>

   <p>ATI グラフィックカードをお使いの場合、新しい GPU であれば KMS を無効化すると <tt>radeonhd</tt>ドライバを利用するようになります。また、 NVIDIA グラフィックカードの場合は KMS を無効化すると <tt>nv</tt>ドライバを利用するようになります (<tt>nouveau</tt> ドライバも KMS にしか対応していないため) 。なお、カーネルの起動パラメータとして <tt>nomodeset</tt> を指定すると、新しい ATI グラフィックカードの場合も、新しい NVIDIA のカードの場合も、 <tt>fbdev</tt> ドライバを利用するようになります。</p>
  

  
   
   <h3>Radeon HDMI サウンド出力の無効化</h3>

   <p>いくつかのハードウエアに搭載されている HDMI 機能の問題により、 AMD/ATI グラフィックカード向けの既定のドライバであるradeon ドライバのサウンド出力が無効化されています。</p>
   <p>カーネルのパラメータに <tt>radeon.audio=1</tt> を追加することで、これを有効に戻すことができます。 YaST から設定する場合、システム→ブートローダを選択して、既定の起動項目を選んで編集ボタンを押し、 'オプションのカーネルコマンドラインパラメータ' の末尾に下記を追加します:</p>

   <pre>radeon.audio=1</pre>

   <p>変更を適用するには、システムを再起動してください。</p>
   <p>これ以外に、 AMD が提供するプロプライエタリドライバをインストールする方法もあります。詳しくは <tt>http://ja.opensuse.org/SDB:ATI_drivers</tt> をお読みください。</p>
  

  
   
   <h3>systemd での起動と sysvinit での起動について</h3>

   <p>現在のバージョンの openSUSE では、既定で <tt>systemd</tt> を利用するようになりました。何らかのトラブルが発生した場合は、起動時に F5 を押すことで、従来の <tt>sysvinit</tt> での起動を行なうことができます。</p>

   <p>恒久的に <tt>sysvinit</tt> での起動を行なうようにしたい場合は、 <tt>sysvinit-init</tt> パッケージをインストールしてください。その後 <tt>systemd</tt> に戻すには、 <tt>systemd-sysvinit</tt> パッケージを再インストールしてください。</p>
  

  
   
   <h3>systemd: サービスの起動パラメータに対する設定</h3>
   <p><tt>systemctl</tt> では "標準" パラメータ (standard parameters) (詳しくは <tt>http://www.freedesktop.org/wiki/Software/systemd/Incompatibilities</tt> をお読みください) のみに対応しています。</p>
   <p>起動スクリプトを直接呼び出すことで、この動作を回避したい場合は、下記のように実行します:</p>
   <pre>cd /etc/init.d
./apache2 &lt;パラメータ類&gt;
</pre>
  

  
   
   <h3>systemd: システムのシャットダウン</h3>

   <p><tt>systemd</tt> を利用している環境で、システムのシャットダウンや電源を切りたい場合、コマンドラインの場合は <tt>halt -p</tt> または <tt>shutdown -h now</tt> を実行してください。お使いのデスクトップ環境に用意されているシャットダウンボタンでもかまいません。</p>

   <p>注意: 単純な <tt>halt</tt> コマンドでは、システムを正しく終了させることができません。</p>
  

  
   
   <h3>systemd: /run, /var/run, /media などにおける tmpfs の使用について</h3>

   <p>systemd では、一時的なデータのみを保管するため、 tmpfs ファイルシステムでマウントするディレクトリがあります。これには <tt>/run</tt>, <tt>/var/run</tt>, <tt>/var/lock</tt>,<tt>/media</tt> などがあります。背景となる情報について、詳しくは <tt>http://lwn.net/Articles/436012/</tt> をお読みください。</p>

   <p>注意: <tt>/run</tt>, <tt>/var/run</tt> などのディレクトリには、再起動後にも残しておきたいデータは配置しないでください。</p>
  

  
   
   <h3>systemd: ディレクトリのクリーンアップ (/tmp と /var/tmp)</h3>

   <p>systemd では、 <tt>tmpfiles.d</tt> ディレクトリと <tt>/lib/systemd/system/systemd-tmpfiles-clean.timer</tt> の設定に従ってディレクトリを管理します。詳しくは <tt>tmpfiles.d</tt> のマニュアルページをお読みください。</p>

   <p>既定では、 systemd は <tt>/usr/lib/tmpfiles.d/tmp.conf</tt> の設定に従って、毎日 <tt>tmp</tt> ディレクトリをクリーンアップします:</p>

<pre>d /tmp 1777 root root 10d
d /var/tmp 1777 root root 30d
</pre>

    <p>注意: systemd は <tt>/etc/sysconfig/cron</tt> 内の変数、たとえば <tt>TMP_DIRS_TO_CLEAR</tt> などのシステム設定を読み込まないことに注意してください。</p>
  

  
   
   <h3>CUPS 1.5</h3>
   <p>CUPS 1.5 には、下記のような後方互換性に影響する変更があります:</p>
   <ul>
    <li>
     <p>CUPS 1.1 で利用されていた <tt>~/.cupsrc</tt> および <tt>~/.lpoptions</tt> の設定ファイルには、対応しなくなりました。代用として、 CUPS 1.2 から利用できるようになった <tt>~/.cups/client.conf</tt> および <tt>~/.cups/lpoptions</tt> ファイルをご利用ください。</p>
    </li>
    <li>
     <p>セキュリティの改善のため、スケジューラはフィルタとバックエンドに対して、グループの書き込み権限を無効にすることを求めるようになりました。緩いファイルパーミッションを設定し公開しているような、サードパーティ製のドライバをお使いの場合は、パーミッションを手動で調整してください。</p>
    </li>
   </ul>
  

  
   
   <h3>rename コマンド</h3>
   <p>GNU のコーディング標準により rename コマンドは、ハイフンで始まる全ての文字列をコマンドラインオプションとして扱うようになりました。この問題を回避するには、下記のようにしてオプションとその他のパラメータを区切ってください:</p>
   <pre>#!/bin/bash
for f in *.jpg ; do
  rename -- ".jpg" "-$RANDOM.jpg" $f ;
done
</pre>
  

  
   
   <h3>NetworkManager のコマンドラインインターフェイス</h3>

   <p><tt>cnetworkmanager</tt> は提供されなくなり、代わりに <tt>nmcli</tt> が利用できるようになりました。移行に関する詳細は、 <tt>http://repo.or.cz/w/cnetworkmanager.git/blob_plain/HEAD:/nmcli-migration.html</tt> をお読みください。</p>
  

  
   
   <h3>rpm: root 以外のユーザに対する %_topdir の変更</h3>

   <p>特権を持たないユーザでは、 <tt>/usr/src/packages</tt> に対して書き込むことができなくなりました。これに合わせて、 <tt>rpmbuild</tt> は既定で <tt>~/rpmbuild</tt> を使用するように修正されています。ディレクトリを変更するには、 <tt>~/.rpmmacros</tt> ファイルに下記の行を記入してください:</p>
   <pre>%_topdir /some/where/else</pre>
   <p>たとえば <tt>$HOME</tt> 以下の <tt>foo</tt> というサブディレクトリを使用したい場合、下記の行を <tt>~/.rpmmacros</tt> に追加します:</p>
   <pre>%_topdir %{getenv:HOME}/foo</pre>
  
 

