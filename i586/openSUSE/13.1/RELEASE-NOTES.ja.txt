openSUSE 13.1 リリースノート

Version: 13.1.10 (2014-01-08)

Copyright © 2013 SUSE LLC

この文書を、フリーソフトウエア財団発行の GNU フリー文書利用許諾契約書(バー
ジョン1.2かそれ以降から一つを選択)が定める条件の下で複製、頒布、あるいは改
変することを許可する。変更不可部分、表カバーテキスト、裏カバーテキストは存
在しない。この利用許諾契約書の複製物は fdl.txt ファイルに含まれている。

---------------------------------------------------------------------------

1. その他
2. インストール

    2.1. インストールに関する詳細情報

3. 全般

    3.1. openSUSE ドキュメンテーション
    3.2. 廃止された YaST モジュールについて
    3.3. UEFI—Unified Extensible Firmware Interface
    3.4. UEFI, GPT, MS-DOS の各パーティションについて
    3.5. Secure Boot モードでの起動について
    3.6. Adobe Reader (acroread) とその他の PDF リーダ

4. システムアップグレード

    4.1. zypper (dup) でアップグレードする際の /etc/fstab の整理について
    4.2. SYSLOG_DAEMON の変数削除について
    4.3. ネットワークインターフェイスの命名規則について

5. テクニカル

    5.1. KMS を利用したグラフィックの初期化 (カーネルモード設定)
    5.2. Nouveau ドライバを利用してインストールした場合の画面の乱れについて
    5.3. Samba バージョン 4.1
    5.4. postfix の設定
    5.5. xinetd: syslog への記録
    5.6. Apache バージョン 2.4
    5.7. tomcat: syslog への記録
    5.8. Darktable: キャッシュファイルの更新について
    5.9. Locate: findutils-locate から mlocate への置き換えについて
    5.10. KDE と Bluetooth
    5.11. AppArmor とパーミッション (アクセス権) 設定について
    5.12. Skype
    5.13. AutoYaST

openSUSE の旧バージョンからアップグレードした場合は、下記に示す旧バージョン
のリリースノートもお読みください: http://ja.opensuse.org/
openSUSE:Release_Notes

このリリースノートでは、次の分野に関する情報を掲載しています。

  o 「その他」: これらの項目は、いずれも openFATE (機能や要件を管理するシス
    テム (http://features.opensuse.org)) から自動的に取り込まれたものです。

    N/A

  o 「インストール」: 何もない状態からシステムをインストールする際に、読む
    べき項目です。

  o 「全般」: すべてのユーザを対象とした情報です。

  o 「システムアップグレード」: openSUSE 旧バージョンから、本バージョンにシ
    ステムアップグレードした場合に、発生しうる問題点です。

  o 「テクニカル」: この章には、知識のあるユーザのための技術的な変更点や、
    改良点が多く記載されています。

1. その他

N/A

2. インストール

2.1. インストールに関する詳細情報

インストールについて詳しくは、「openSUSE ドキュメンテーション」をお読みくだ
さい。

3. 全般

3.1. openSUSE ドキュメンテーション

スタートアップではインストール作業を順を追って読むことができるほか、 KDE や
Gnome デスクトップ、そして LibreOffice スイートに関する紹介が書かれています
。また、配置やソフトウエア管理などの基本的な管理作業のほか、 bash シェルの
紹介などが書かれています。

ドキュメンテーションは、 opensuse-startup_$LANG パッケージをインストールす
ることで、 /usr/share/doc/manual/opensuse-manuals_$LANG から読むことができ
るほか、http://doc.opensuse.org にあるオンライン版を読むこともできます。

3.2. 廃止された YaST モジュールについて

下記の YaST モジュールはほとんど使用されないものであるため、廃止されました:

  o yast2-autofs

  o yast2-dbus-client

  o yast2-dirinstall

  o yast2-fingerprint-reader

  o yast2-irda

  o yast2-mouse

  o yast2-phone-services

  o yast2-power-management

  o yast2-profile-manager

  o yast2-sshd

  o yast2-tv

モジュールの廃止の主な理由としては、メンテナンスコストの削減と主要モジュー
ルへのさらなる注力にあります。

3.3. UEFI—Unified Extensible Firmware Interface

UEFI (Unified Extensible Firmware Interface) を利用して起動するシステムに
openSUSE をインストールする場合、事前に製造元が推奨するファームウエア更新を
必ずチェックし、可能であればインストールしておくことを強くお勧めします。
Windows 8 がプレインストールされているマシンの場合、お使いのシステムが UEFI
である可能性が高いものと思われます。

背景: UEFI のファームウエアによっては、 UEFI のストレージ領域に多くのデータ
が書き込まれることで、起動に失敗してしまうバグを抱えています。もちろんこれ
はバグであるため、どれだけ "多くの"データを書き込むことで問題を発生させるの
かは、誰にもわかりません。 openSUSE では、 OS を起動するのに最低限必要とな
るデータ (UEFI に対して、 openSUSE のブートローダの場所を示すための情報) し
か書き込まないようにすることで、このバグの発生を最小化しています。 Linux カ
ーネルのオリジナル版では、 UEFI のストレージ領域に起動やクラッシュに関する
情報を書き込む機能 (pstore) がありますが、openSUSE の既定では無効化していま
す。ただし、バグである都合上、ハードウエアの製造元が推奨するファームウエア
更新については、必ずインストールしておくことをお勧めします。

3.4. UEFI, GPT, MS-DOS の各パーティションについて

EFI/UEFI の仕様には、新しい形式のパーティションテーブル GPT (GUID パーティ
ションテーブル) が定義されています。この新しい方式では、ユニークな GUID (識
別子; 32 桁の 16 進数で表わされる 128 ビットの値) を利用してデバイスとパー
ティション種別を識別します。

これに加えて、 UEFI の仕様では古い MBR (MS-DOS) 形式のパーティションテーブ
ルにも対応しています。 Linux のブートローダ (ELILO, GRUB2) では、これらの古
い形式のパーティションに対して、自動的に GUID を割り当ててファームウエア内
に書き込もうとします。この場合、 GUID は頻繁に変更されるものであるため、フ
ァームウエアへの再書き込みも頻繁に発生することになります。この再書き込みに
は 2 つの操作、具体的には古い項目の削除と、それを置き換える新しい項目の作成
を行ないます。

新しいファームウエアでは、削除された項目を収集して古い項目用に確保したメモ
リを解放する、ガーベージコレクタ機能が用意されています。ファームウエアに不
具合があると、これらの古い項目を収集できなかったり、メモリを解放しなかった
りする場合があり、これにより起動が不可能になる場合があります。

このような場合は、古い MBR 形式のパーティションを新しい GPT 形式のパーティ
ションに更新して、問題を回避してください。

3.5. Secure Boot モードでの起動について

この問題は、 Secure Boot が有効化された UEFI モードのマシンにのみ影響があり
ます。

shim ローダの新しいバージョンでは、 openSUSE 12.3 で提供されていたものより
多くのマシンで、 Secure Boot を利用できるようになっています。今回のバージョ
ンでも起動に問題がある場合は、まずお使いのマシンの BIOS を、最新バージョン
に更新してみてください。 BIOS の更新でもうまく動作しない場合は、お使いのマ
シンの型式を wiki (http://ja.opensuse.org/openSUSE:UEFI) にご報告ください。
これにより、対応可否がわかるようになります。

3.6. Adobe Reader (acroread) とその他の PDF リーダ

Adobe 社では、 Adobe Reader (acroread) に対する (主にセキュリティの) 更新を
提供しないことになりました。そのため、 openSUSE のユーザを保護する観点から
、 acroread パッケージについても、ディストリビューションの配布物から外すこ
とになりました。

openSUSE には、 Okular, Evince, poppler-tools など、様々な PDF 表示ツールが
用意されています。これらのツールは、いずれも活発にメンテナンスされているも
ので、 openSUSE や提供元からセキュリティ修正を受けることができます。

詳しくは http://ja.opensuse.org/Adobe_Reader をお読みください。

4. システムアップグレード

4.1. zypper (dup) でアップグレードする際の /etc/fstab の整理について

zypper dup (YaST が自動的にアップグレードを処理する機能) でアップグレードを
行なう場合で、/etc/fstab 内に下記の項目が存在する場合は、それらを削除する必
要があります:

tmpfs   /dev/shm
devpts  /dev/pts
sysfs   /sys sysfs
proc    /proc proc

これらは特に GNOME ユーザの場合に重要になります。上記の項目を削除せずにアッ
プグレードしてしまうと、GNOME 端末が "grantpt failed: Operation not
permitted" というエラーを出力するようになります。これらのマウントポイントは
、 systemd 側で管理するようになっているものであるため、/etc/fstab 内に存在
すべきではありません。

4.2. SYSLOG_DAEMON の変数削除について

SYSLOG_DAEMON 変数は削除されました。以前は利用する syslog デーモンを選択す
るための機能として用意されていましたが、openSUSE 12.3 以降ではシステムに対
して同時に 1 つの syslog 実装しかインストールできなくなったため、それを自動
で使用するようになったことによるものです。

詳しくは syslog(8) のマニュアルページをお読みください。

4.3. ネットワークインターフェイスの命名規則について

現在のバージョンの systemd では、ネットワークインターフェイスに対して割り当
てられる名称を予測可能なものにする新しい仕組みが導入されています。これにあ
わせて YaST 側も修正されています。

YaST に対するバグ報告によると、インターフェイスの名称を変更することで、問題
が発生することが判明しています。もしも同じネットワークインターフェイスに対
して、 2 つの名前が割り当てられるような事象が発生した場合は、この問題に該当
しているものと思われます。この場合は、 /etc/sysconfig/network 内にあるいず
れか一方のネットワークインターフェイスの設定を削除してから、 YaST で再設定
してください。

ネットワークインターフェイスの命名規則について、詳しくは http://
www.freedesktop.org/wiki/Software/systemd/PredictableNetworkInterfaceNames/
(英語) をお読みください。

5. テクニカル

5.1. KMS を利用したグラフィックの初期化 (カーネルモード設定)

openSUSE 11.3 以降で Intel, ATI, NVIDIA の各グラフィックカードをご利用の場
合、 KMS (Kernel Mode Setting; カーネルモード設定) を既定値として使用するよ
うになっています。 KMS ドライバ (intel, radeon, nouveau) を使用するにあたっ
て何らかの問題が発生した場合は、起動時に設定するカーネルのコマンドラインに
nomodeset を追加することで、 KMS を無効化することができます。この設定を
grub2 で恒久的に使用する場合は、 /etc/default/grub というテキストファイル内
にあるGRUB_CMDLINE_LINUX_DEFAULT という変数を編集してください。編集後は、

sudo /usr/sbin/grub2-mkconfig --output=/boot/grub2/grub.cfg

を実行することで、システムに反映させることができます。また、 grub legacy を
お使いの場合は、 /boot/grub/menu.lst ファイル内のカーネルのコマンドラインの
場所に、上記を指定してください (こちらは root で行ないます)。なお、この設定
を行なうと、対応するカーネルモジュール (intel, radeon, nouveau) が initrd
内から modeset=0 のパラメータを付けて読み込まれます。これにより KMS が無効
になります。

またごく稀なケースとして、 DRM モジュールを initrd から読み込む際に、何らか
の一般的な (KMS に関係しない) 問題が発生する場合があります。この場合は
initrd 内から DRM モジュールを完全に読み込まないように設定することもできま
す。この設定を行なうには、 YaST の sysconfig エディタを利用して
NO_KMS_IN_INITRD の変数を yes に設定したあと、 initrd を作り直してシステム
を再起動してください。

Intel グラフィックカードをお使いの場合、 KMS を無効化すると X サーバが
fbdev ドライバを利用するようになります (intel ドライバは KMS にしか対応して
いないため) 。その代わり、 UMS (ユーザモード設定;つまり KMS を無効化した状
態) への対応として、 "intellegacy" ドライバ
(xorg-x11-driver-video-intel-legacy パッケージ) があります。これを利用する
には、 /etc/X11/xorg.conf.d/50-device.conf ファイルを編集し、ドライバの項目
で intellegacy を指定してください。

ATI グラフィックカードをお使いの場合、新しい GPU であれば KMS を無効化する
と radeonhdドライバを利用するようになります。また、 NVIDIA グラフィックカー
ドの場合は KMS を無効化すると nvドライバを利用するようになります (nouveau
ドライバも KMS にしか対応していないため) 。なお、カーネルの起動パラメータと
して nomodeset を指定すると、新しい ATI グラフィックカードの場合も、新しい
NVIDIA のカードの場合も、 fbdev ドライバを利用するようになります。

5.2. Nouveau ドライバを利用してインストールした場合の画面の乱れについて

NVIDIA カードを搭載したシステムでは、既定の nouveau ドライバの問題により、
画面の上部に乱れが発生する場合があります。この問題に直面した場合は、インス
トーラの実行時に nouveau ドライバを無効化し、インストールまたは更新の作業が
終わった後に有効化し直してください。

カーネルモジュールを無効化するには、インストールメディアから起動する際に
grub のメニューで 'インストール' の項目を選び、'e' を押してパラメータを編集
してください。あとは 'linux' (または 'linuxefi') で始まる行に移動して、行末
に brokenmodules=nouveau を追加してください。追加後は F10 を押すと、新しい
パラメータで起動することができます。システムのインストール後は /etc/
modprobe.d/50-blacklist.conf ファイルを編集し、nouveau と書かれた行を削除す
ることで、再度有効化することができます。

5.3. Samba バージョン 4.1

openSUSE 13.1 に同梱されている Samba バージョン 4.1 には、 Active Directory
形式のドメインコントローラとして動作するためのサポートが含まれていません。
この機能は、システム全体に対する MIT Kerberos との統合機能が欠けていること
により、無効化されています。

5.4. postfix の設定

openSUSE 12.3 およびそれ以降のバージョンでは、 SuSEconfig.postfix として提
供されていたプログラムが /usr/sbin/config.postfix という名前に変更されまし
た。 /etc/sysconfig/postfix や /etc/sysconfig/mail 内で sysconfig の変数を
設定している場合は、 root ユーザになった状態から手作業で /usr/sbin/
config.postfix を実行しなければなりません。

5.5. xinetd: syslog への記録

xinetd の既定値が変更され、ログの記録先が /var/log/xinetd.log からsyslog に
なりました。これにより、 xinetd が出力するメッセージは、 facility=daemon,
priority=info で syslog に記録されるようになります。

従来の記録方法に戻したい場合は、 /etc/xinetd.conf で設定を行なってください
。なお、従来のxinetd.log に対する logrotate スクリプトは、 /usr/share/doc/
packages/xinetd/logrotate にあります。

5.6. Apache バージョン 2.4

Apache 2.4 では、設定ファイルについて様々な変更が加えられています。以前のバ
ージョンからのアップグレードについて、詳しくは http://httpd.apache.org/docs
/2.4/upgrading.html をお読みください。

5.7. tomcat: syslog への記録

tomcat の起動スクリプトの仕様が修正され、ログが /var/log/tomcat/
catalina.out には書き込まれなくなりました。出力される全てのメッセージは、
tomcat.service (tomcat-jsvc.service) を通じて priority=info で syslog に記
録されます。

5.8. Darktable: キャッシュファイルの更新について

以前のリリースから openSUSE 13.1 にアップグレードした場合、古いキャッシュフ
ァイルが動作しません。この場合は、必要に応じて ~/.cache/darktable/mipmaps
ファイルを削除してください。

5.9. Locate: findutils-locate から mlocate への置き換えについて

findutils-locate の代替として、 mlocate ツールが提供されるようになりました
。mlocate の既定では、 findutils-locate と同じ動作になるように設定されてい
ます。ただし、パーミッションの処理が改善されたことにより、データベースが一
般のユーザに開放されるまで、最大で 24 時間かかるようになっています。

mlocate のインストール後、 "Permission denied" (許可がありません) のような
メッセージに遭遇した場合は、下記のコマンドを root で実行してください:

/etc/cron.daily/mlocate.cron

これにより、問題を解決することができます。

5.10. KDE と Bluetooth

本バージョンで提供されている Bluetooth スタックは、 Bluez 5 (メジャーバージ
ョンで、後方互換性の無いバージョン) になっています。これは GNOME デスクトッ
プをはじめ、その他のベースシステムコンポーネントで必要なアップグレードです
が、現行バージョンの KDE ワークスペースは Bluez バージョン 4 までにしか対応
していません。

そのため openSUSE KDE コミュニティでは、デバイスのペアリングや Bluetooth マ
ウスなど、基本的な機能を提供する非公式のパッケージ Bluedevil を提供すること
になりました。その他の機能、たとえばファイル転送などの機能については、動作
しないことが確認されています。

そのため、現時点では KDE 内での Bluetooth サポートについては、バグを報告し
ないようにお願いいたします。Bluedevil の Bluez 5 への対応は、現在作業中です
。

5.11. AppArmor とパーミッション (アクセス権) 設定について

AppArmor は既定で有効化されています。これによりセキュリティが強化されますが
、場合によってはサービスなどがうまく動作しないことがあります。パーミッショ
ン関連の問題でおかしな動作を発見した場合は、まず対象のサービスに対して
AppArmor を不平モードに切り替えてみることをお勧めします:

aa-complain /usr/bin/$your_service

不平モードとは、全ての動作を許可するものの、許可するはずではない動作を記録
するためのモードです。

不平モードはバグを報告する際にも便利です。 AppArmor のプロファイルのうち、
ごく稀に発生する問題についても修正を行ないたいと考えております。

5.12. Skype

PulseAudio 4.0 で現在の Linux 版 Skype (v4.2) を使用すると、バグが発生する
ことが分かっています。 Skype が修正されて更新されるまでの間、 skype は下記
のようにして実行してください:

PULSE_LATENCY_MSEC=60 skype

このバグについて、詳しくは http://arunraghavan.net/2013/08/
pulseaudio-4-0-and-skype/ (英語) をお読みください。

5.13. AutoYaST

AutoYaST のプロファイル内に <add-on> セクションの項目が含まれている場合、プ
ロファイル内の情報を第 1 ステージから第 2 ステージに受け渡す処理が失敗する
バグに引っかかる可能性があります。そのため、この場合は第 2 ステージの全ての
設定処理を飛ばす動作になりますので、そのまま行くとインストールが完了しても
利用できないシステムになってしまいます。

一時的な回避策として、 openSUSE 13.1 では AutoYaST のプロファイルから
<add-on> セクションを削除してください。

